2025-11-10 11:13:03 [[32minfo[39m]: ========================================
2025-11-10 11:13:03 [[32minfo[39m]: ========================================
2025-11-10 11:13:03 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:13:03 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:13:03 [[32minfo[39m]: Starting API server...
2025-11-10 11:13:03 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:13:06 [[32minfo[39m]: Database connection test successful
2025-11-10 11:13:06 [[32minfo[39m]: Server initialization complete
2025-11-10 11:13:06 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:13:06 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:13:06 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:13:06 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:13:06 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:13:06 [[32minfo[39m]: üöÄ Auto-starting scanner (found active user configs)...
2025-11-10 11:13:06 [[32minfo[39m]: ‚úÖ Scanner started automatically
2025-11-10 11:13:06 [[32minfo[39m]: ========================================
2025-11-10 11:13:06 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:13:06 [[32minfo[39m]: ========================================
2025-11-10 11:13:16 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 11:26:05 [[32minfo[39m]: ========================================
2025-11-10 11:26:05 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:26:05 [[32minfo[39m]: Starting API server...
2025-11-10 11:26:05 [[32minfo[39m]: ========================================
2025-11-10 11:26:05 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:26:05 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:26:07 [[32minfo[39m]: Database connection test successful
2025-11-10 11:26:07 [[32minfo[39m]: Server initialization complete
2025-11-10 11:26:07 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:26:07 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:26:07 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:26:07 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:26:07 [[32minfo[39m]: üöÄ Auto-starting scanner (found active user configs)...
2025-11-10 11:26:07 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:26:07 [[32minfo[39m]: ‚úÖ Scanner started automatically
2025-11-10 11:26:07 [[32minfo[39m]: ========================================
2025-11-10 11:26:07 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:26:07 [[32minfo[39m]: ========================================
2025-11-10 11:26:17 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 11:26:19 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 11:26:56 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:26:56 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
}
help: 'https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/'
code: 'ERR_ERL_UNEXPECTED_X_FORWARDED_FOR',
at async file:///app/node_modules/express-rate-limit/dist/index.mjs:663:5 {
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
at file:///app/node_modules/express-rate-limit/dist/index.mjs:682:32
at Object.keyGenerator (file:///app/node_modules/express-rate-limit/dist/index.mjs:630:20)
at wrappedValidations.<computed> [as xForwardedForHeader] (file:///app/node_modules/express-rate-limit/dist/index.mjs:369:22)
at Object.xForwardedForHeader (file:///app/node_modules/express-rate-limit/dist/index.mjs:157:13)
ValidationError: The 'X-Forwarded-For' header is set but the Express 'trust proxy' setting is false (default). This could indicate a misconfiguration which would prevent express-rate-limit from accurately identifying users. See https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/ for more information.
2025-11-10 11:26:58 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:26:58 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:27:09 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:27:09 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:27:18 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:27:18 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:27:37 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:27:37 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:32:05 [[32minfo[39m]: ========================================
2025-11-10 11:32:05 [[32minfo[39m]: Starting API server...
2025-11-10 11:32:05 [[32minfo[39m]: ========================================
2025-11-10 11:32:05 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:32:05 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:32:05 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:32:07 [[32minfo[39m]: Database connection test successful
2025-11-10 11:32:07 [[32minfo[39m]: Server initialization complete
2025-11-10 11:32:07 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:32:07 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:32:07 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:32:07 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:32:07 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:32:07 [[32minfo[39m]: üöÄ Auto-starting scanner (found active user configs)...
2025-11-10 11:32:07 [[32minfo[39m]: ‚úÖ Scanner started automatically
2025-11-10 11:32:07 [[32minfo[39m]: ========================================
2025-11-10 11:32:07 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:32:07 [[32minfo[39m]: ========================================
2025-11-10 11:32:17 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 11:32:19 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 11:36:37 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:36:37 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 11:36:38 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:36:38 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:36:56 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 11:36:56 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 11:47:22 [[32minfo[39m]: ========================================
2025-11-10 11:47:22 [[32minfo[39m]: Starting API server...
2025-11-10 11:47:22 [[32minfo[39m]: ========================================
2025-11-10 11:47:22 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:47:22 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:47:22 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:47:24 [[32minfo[39m]: Server initialization complete
2025-11-10 11:47:24 [[32minfo[39m]: Database connection test successful
2025-11-10 11:47:24 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 11:47:24 [[32minfo[39m]: ========================================
2025-11-10 11:47:24 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 11:47:24 [[32minfo[39m]: ========================================
2025-11-10 11:47:24 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:47:24 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:47:24 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:47:24 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:47:24 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:47:37 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 11:51:33 [[32minfo[39m]: ========================================
2025-11-10 11:51:33 [[32minfo[39m]: Starting API server...
2025-11-10 11:51:33 [[32minfo[39m]: ========================================
2025-11-10 11:51:33 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:51:33 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:51:33 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:51:33 [[32minfo[39m]: Database connection test successful
2025-11-10 11:51:33 [[32minfo[39m]: Server initialization complete
2025-11-10 11:51:33 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 11:51:33 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 11:51:33 [[32minfo[39m]: ========================================
2025-11-10 11:51:33 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:51:33 [[32minfo[39m]: ========================================
2025-11-10 11:51:33 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:51:33 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:51:33 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:51:33 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:51:48 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 11:59:23 [[32minfo[39m]: ========================================
2025-11-10 11:59:23 [[32minfo[39m]: ========================================
2025-11-10 11:59:23 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 11:59:23 [[32minfo[39m]: Initializing database connection...
2025-11-10 11:59:23 [[32minfo[39m]: Starting API server...
2025-11-10 11:59:23 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 11:59:24 [[32minfo[39m]: Database connection test successful
2025-11-10 11:59:24 [[32minfo[39m]: Server initialization complete
2025-11-10 11:59:24 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 11:59:24 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 11:59:24 [[32minfo[39m]: ========================================
2025-11-10 11:59:24 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 11:59:24 [[32minfo[39m]: ========================================
2025-11-10 11:59:24 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 11:59:24 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 11:59:24 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 11:59:24 [[32minfo[39m]: üìù Environment: production
2025-11-10 11:59:37 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 12:05:42 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 12:05:42 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 12:05:44 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 12:05:44 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 12:05:45 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 12:05:45 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 12:05:46 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 12:05:46 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 12:57:51 [[32minfo[39m]: ========================================
2025-11-10 12:57:51 [[32minfo[39m]: ========================================
2025-11-10 12:57:51 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 12:57:51 [[32minfo[39m]: Initializing database connection...
2025-11-10 12:57:51 [[32minfo[39m]: Starting API server...
2025-11-10 12:57:51 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 12:57:52 [[32minfo[39m]: Database connection test successful
2025-11-10 12:57:52 [[32minfo[39m]: Server initialization complete
2025-11-10 12:57:52 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 12:57:52 [[32minfo[39m]: ========================================
2025-11-10 12:57:52 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 12:57:52 [[32minfo[39m]: ========================================
2025-11-10 12:57:52 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 12:57:52 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 12:57:52 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 12:57:52 [[32minfo[39m]: üìù Environment: production
2025-11-10 12:57:52 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 12:58:05 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 13:25:05 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:25:05 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 13:25:08 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:25:08 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 13:25:18 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 13:26:02 [[32minfo[39m]: Lead updated {"leadId":235,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","updates":{"lead_status":"sale"}}
2025-11-10 13:26:02 [[32minfo[39m]: Updated detected lead {"leadId":235,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:26:05 [[32minfo[39m]: Updated detected lead {"leadId":235,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:26:05 [[32minfo[39m]: Lead updated {"leadId":235,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","updates":{"lead_status":"lead"}}
2025-11-10 13:27:26 [[32minfo[39m]: ========================================
2025-11-10 13:27:26 [[32minfo[39m]: Starting API server...
2025-11-10 13:27:26 [[32minfo[39m]: ========================================
2025-11-10 13:27:26 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 13:27:26 [[32minfo[39m]: Initializing database connection...
2025-11-10 13:27:26 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 13:27:28 [[32minfo[39m]: Database connection test successful
2025-11-10 13:27:28 [[32minfo[39m]: Server initialization complete
2025-11-10 13:27:28 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 13:27:28 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 13:27:28 [[32minfo[39m]: ========================================
2025-11-10 13:27:28 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 13:27:28 [[32minfo[39m]: ========================================
2025-11-10 13:27:28 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 13:27:28 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 13:27:28 [[32minfo[39m]: üìù Environment: production
2025-11-10 13:27:28 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 13:27:41 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 13:34:17 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 13:34:17 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:34:17 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:34:17 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 13:34:27 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 13:40:19 [[32minfo[39m]: ========================================
2025-11-10 13:40:19 [[32minfo[39m]: ========================================
2025-11-10 13:40:19 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 13:40:19 [[32minfo[39m]: Initializing database connection...
2025-11-10 13:40:19 [[32minfo[39m]: Starting API server...
2025-11-10 13:40:19 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 13:40:20 [[31merror[39m]: Database connection test failed {"error":"Database connection test failed"}
2025-11-10 13:40:20 [[32minfo[39m]: Server initialization complete
2025-11-10 13:40:20 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 13:40:20 [[32minfo[39m]: ========================================
2025-11-10 13:40:20 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 13:40:20 [[32minfo[39m]: ========================================
2025-11-10 13:40:20 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 13:40:20 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 13:40:20 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 13:40:20 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 13:40:20 [[32minfo[39m]: üìù Environment: production
2025-11-10 13:40:34 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 13:44:40 [[31merror[39m]: Failed to get detected leads {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","error":"Invalid API key"}
at async file:///app/src/utils/errorHandler.js:69:7
at async file:///app/src/api/routes/leads.js:43:17
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
at getDetectedLeads (file:///app/src/database/queries.js:161:11)
DatabaseError: Failed to get detected leads
2025-11-10 13:44:40 [[31merror[39m]: Error in GET /api/leads Failed to get detected leads {"name":"DatabaseError","context":"GET /api/leads","details":{"originalError":"Invalid API key"}}
2025-11-10 13:44:42 [[31merror[39m]: Failed to get detected leads {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","error":"Invalid API key"}
at async file:///app/src/utils/errorHandler.js:69:7
at async file:///app/src/api/routes/leads.js:43:17
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
at getDetectedLeads (file:///app/src/database/queries.js:161:11)
DatabaseError: Failed to get detected leads
2025-11-10 13:44:42 [[31merror[39m]: Error in GET /api/leads Failed to get detected leads {"name":"DatabaseError","context":"GET /api/leads","details":{"originalError":"Invalid API key"}}
at async file:///app/src/utils/errorHandler.js:69:7
at async file:///app/src/api/routes/leads.js:43:17
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
at getDetectedLeads (file:///app/src/database/queries.js:161:11)
DatabaseError: Failed to get detected leads
2025-11-10 13:44:43 [[31merror[39m]: Error in GET /api/leads Failed to get detected leads {"name":"DatabaseError","context":"GET /api/leads","details":{"originalError":"Invalid API key"}}
2025-11-10 13:44:43 [[31merror[39m]: Failed to get detected leads {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","error":"Invalid API key"}
2025-11-10 13:46:54 [[32minfo[39m]: ========================================
2025-11-10 13:46:54 [[32minfo[39m]: ========================================
2025-11-10 13:46:54 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 13:46:54 [[32minfo[39m]: Initializing database connection...
2025-11-10 13:46:54 [[32minfo[39m]: Starting API server...
2025-11-10 13:46:54 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 13:46:56 [[32minfo[39m]: Server initialization complete
2025-11-10 13:46:56 [[32minfo[39m]: Database connection test successful
2025-11-10 13:46:56 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 13:46:56 [[32minfo[39m]: ========================================
2025-11-10 13:46:56 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 13:46:56 [[32minfo[39m]: ========================================
2025-11-10 13:46:56 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 13:46:56 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 13:46:56 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 13:46:56 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 13:46:56 [[32minfo[39m]: üìù Environment: production
2025-11-10 13:47:09 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 13:55:32 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 13:55:32 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 13:55:42 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 13:58:51 [[32minfo[39m]: ========================================
2025-11-10 13:58:51 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 13:58:51 [[32minfo[39m]: Starting API server...
2025-11-10 13:58:51 [[32minfo[39m]: ========================================
2025-11-10 13:58:51 [[32minfo[39m]: Initializing database connection...
2025-11-10 13:58:51 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 13:58:53 [[32minfo[39m]: Database connection test successful
2025-11-10 13:58:53 [[32minfo[39m]: Server initialization complete
2025-11-10 13:58:53 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 13:58:53 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 13:58:53 [[32minfo[39m]: ========================================
2025-11-10 13:58:53 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 13:58:53 [[32minfo[39m]: ========================================
2025-11-10 13:58:53 [[32minfo[39m]: üìù Environment: production
2025-11-10 13:58:53 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 13:58:53 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 13:58:53 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 13:59:05 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 14:01:27 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:01:27 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 14:01:37 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 14:01:47 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:01:47 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 14:03:04 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:03:04 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 14:05:12 [[32minfo[39m]: ========================================
2025-11-10 14:05:12 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 14:05:12 [[32minfo[39m]: Initializing database connection...
2025-11-10 14:05:12 [[32minfo[39m]: Starting API server...
2025-11-10 14:05:12 [[32minfo[39m]: ========================================
2025-11-10 14:05:12 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 14:05:14 [[32minfo[39m]: Database connection test successful
2025-11-10 14:05:14 [[32minfo[39m]: Server initialization complete
2025-11-10 14:05:14 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 14:05:14 [[32minfo[39m]: ========================================
2025-11-10 14:05:14 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 14:05:14 [[32minfo[39m]: ========================================
2025-11-10 14:05:14 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 14:05:14 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 14:05:14 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 14:05:14 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 14:05:14 [[32minfo[39m]: üìù Environment: production
2025-11-10 14:05:26 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 14:06:36 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner...
2025-11-10 14:06:36 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:06:46 [[31merror[39m]: ‚è±Ô∏è Realtime connection timed out
2025-11-10 14:09:26 [[32minfo[39m]: ========================================
2025-11-10 14:09:26 [[32minfo[39m]: ========================================
2025-11-10 14:09:26 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 14:09:26 [[32minfo[39m]: Initializing database connection...
2025-11-10 14:09:26 [[32minfo[39m]: Starting API server...
2025-11-10 14:09:26 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 14:09:26 [[32minfo[39m]: Database connection test successful
2025-11-10 14:09:26 [[32minfo[39m]: Server initialization complete
2025-11-10 14:09:26 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 14:09:26 [[32minfo[39m]: ========================================
2025-11-10 14:09:26 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 14:09:26 [[32minfo[39m]: ========================================
2025-11-10 14:09:26 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 14:09:26 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 14:09:26 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 14:09:26 [[32minfo[39m]: üìù Environment: production
2025-11-10 14:09:26 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 14:09:40 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 14:10:26 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:10:26 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 14:10:27 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:10:27 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 14:10:27 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T14:10:27.540Z","interval":"5 seconds"}
2025-11-10 14:10:32 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:10:37 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:10:37 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:10:37 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:10:37 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":4,"total":10}
2025-11-10 14:10:37 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"4ms","reasons":{"keywords":6}}
2025-11-10 14:10:37 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 14:10:37 [[32minfo[39m]: Getting OpenRouter client {"messageId":60048,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:10:37 [[32minfo[39m]: Making OpenRouter API call {"messageId":60048,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:10:37 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:10:37 [[32minfo[39m]: Getting OpenRouter client {"messageId":60050,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:10:37 [[32minfo[39m]: Making OpenRouter API call {"messageId":60050,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:10:37 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:10:37 [[32minfo[39m]: Making OpenRouter API call {"messageId":60053,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:10:37 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:10:37 [[32minfo[39m]: Getting OpenRouter client {"messageId":60053,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:10:39 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":60053,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1532,"cost":0.000159}
2025-11-10 14:10:39 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":60048,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1550,"cost":0.000162}
2025-11-10 14:10:39 [[32minfo[39m]: Making OpenRouter API call {"messageId":60055,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:10:39 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:10:39 [[32minfo[39m]: Getting OpenRouter client {"messageId":60055,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:10:39 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":60050,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1892,"cost":0.000156}
2025-11-10 14:10:41 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":60055,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1541,"cost":0.000167}
2025-11-10 14:10:41 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":4,"analyzed":4,"matches":0,"failed":0}
2025-11-10 14:10:41 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:10:41 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":0,"totalCost":"0.000644","duration":3438}
2025-11-10 14:10:41 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":4}
2025-11-10 14:17:14 [[32minfo[39m]: ========================================
2025-11-10 14:17:14 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 14:17:14 [[32minfo[39m]: Starting API server...
2025-11-10 14:17:14 [[32minfo[39m]: ========================================
2025-11-10 14:17:14 [[32minfo[39m]: Initializing database connection...
2025-11-10 14:17:14 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 14:17:16 [[32minfo[39m]: Database connection test successful
2025-11-10 14:17:16 [[32minfo[39m]: Server initialization complete
2025-11-10 14:17:16 [[32minfo[39m]: üéõÔ∏è  Scanner is STOPPED
2025-11-10 14:17:16 [[32minfo[39m]: ========================================
2025-11-10 14:17:16 [[32minfo[39m]: üí° Use the UI to Start/Stop the scanner manually
2025-11-10 14:17:16 [[32minfo[39m]: ========================================
2025-11-10 14:17:16 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 14:17:16 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 14:17:16 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 14:17:16 [[32minfo[39m]: üìù Environment: production
2025-11-10 14:17:16 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 14:17:29 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 14:47:45 [[32minfo[39m]: Starting realtime scanner via API {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:47:45 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 14:47:45 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T14:47:45.067Z","interval":"5 seconds"}
2025-11-10 14:47:50 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:47:55 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:47:55 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:47:55 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:47:55 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 14:47:55 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"4ms","reasons":{"keywords":7}}
2025-11-10 14:47:55 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 14:47:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":61235,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:47:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:47:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":61236,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:47:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":61235,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:47:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":61236,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:47:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:47:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":61241,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:47:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:47:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":61241,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:47:56 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61235,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1633,"cost":0.000156}
2025-11-10 14:47:57 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61241,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1734,"cost":0.000173}
2025-11-10 14:47:57 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 14:47:57 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 14:47:57 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:47:57 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000490","duration":1885}
2025-11-10 14:47:57 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61236,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1881,"cost":0.000161}
2025-11-10 14:50:59 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 14:50:59 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 14:51:15 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:51:20 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:51:20 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:51:20 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":2,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:51:20 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":2,"total":10}
2025-11-10 14:51:20 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":2,"filtered":8,"filterRate":"80%","duration":"2ms","reasons":{"keywords":8}}
2025-11-10 14:51:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":61256,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:51:20 [[32minfo[39m]: Starting batch analysis {"totalMessages":2,"maxConcurrent":3}
2025-11-10 14:51:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":61257,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:51:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":61256,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:51:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:51:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":61257,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:51:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:51:21 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61256,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1300,"cost":0.000148}
2025-11-10 14:51:22 [[32minfo[39m]: Batch analysis complete {"total":2,"analyzed":2,"failed":0,"matches":0,"totalCost":"0.000329","duration":1652}
2025-11-10 14:51:22 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61257,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1650,"cost":0.000181}
2025-11-10 14:51:22 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":2}
2025-11-10 14:51:22 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":2,"analyzed":2,"matches":0,"failed":0}
2025-11-10 14:51:22 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:51:55 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:52:00 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:52:00 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:52:00 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"3ms","reasons":{"keywords":7}}
2025-11-10 14:52:00 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 14:52:00 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:52:00 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 14:52:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:52:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":61337,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:52:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:52:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":61338,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:52:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":61337,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:52:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":61339,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:52:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":61338,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:52:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":61339,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:52:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:52:02 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61337,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1732,"cost":0.000162}
2025-11-10 14:52:02 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61339,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1743,"cost":0.000155}
2025-11-10 14:52:02 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:52:02 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000480","duration":2419}
2025-11-10 14:52:02 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":61338,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2416,"cost":0.000163}
2025-11-10 14:52:02 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 14:52:02 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 14:53:35 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:53:40 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:53:40 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:53:40 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 14:53:40 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"4ms","reasons":{"keywords":9}}
2025-11-10 14:53:40 [[32minfo[39m]: Getting OpenRouter client {"messageId":62295,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:53:40 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 14:53:40 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:53:40 [[32minfo[39m]: Making OpenRouter API call {"messageId":62295,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:53:40 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:53:42 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62295,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":2270,"cost":0.000151}
2025-11-10 14:53:42 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:53:42 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000151","duration":2271}
2025-11-10 14:53:42 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 14:53:42 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 14:53:50 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:53:55 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:53:55 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:53:55 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"3ms","reasons":{"keywords":7}}
2025-11-10 14:53:55 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 14:53:55 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:53:55 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 14:53:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":62308,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:53:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:53:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":62308,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:53:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:53:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":62311,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:53:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":62312,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:53:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":62311,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:53:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":62312,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:53:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:53:56 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62308,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1090,"cost":0.000145}
2025-11-10 14:53:56 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62311,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1238,"cost":0.000148}
2025-11-10 14:53:56 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62312,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1393,"cost":0.000181}
2025-11-10 14:53:56 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 14:53:56 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 14:53:56 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:53:56 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000474","duration":1398}
2025-11-10 14:54:25 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 14:54:30 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 14:54:30 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 14:54:30 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 14:54:30 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"3ms","reasons":{"keywords":7}}
2025-11-10 14:54:30 [[32minfo[39m]: Getting OpenRouter client {"messageId":62392,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:54:30 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 14:54:30 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 14:54:30 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:54:30 [[32minfo[39m]: Making OpenRouter API call {"messageId":62392,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:54:30 [[32minfo[39m]: Getting OpenRouter client {"messageId":62393,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:54:30 [[32minfo[39m]: Getting OpenRouter client {"messageId":62394,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 14:54:30 [[32minfo[39m]: Making OpenRouter API call {"messageId":62393,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:54:30 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:54:30 [[32minfo[39m]: Making OpenRouter API call {"messageId":62394,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 14:54:30 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 14:54:31 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62394,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1412,"cost":0.000161}
2025-11-10 14:54:31 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62392,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1431,"cost":0.000162}
2025-11-10 14:54:32 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":62393,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1807,"cost":0.000163}
2025-11-10 14:54:32 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 14:54:32 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000486","duration":1816}
2025-11-10 14:54:32 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 14:54:32 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 15:10:15 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 15:10:20 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 15:10:20 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 15:10:20 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":8,"hasApiKey":true,"hasPrompt":true}
2025-11-10 15:10:20 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":8,"total":10}
2025-11-10 15:10:20 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":8,"filtered":2,"filterRate":"20%","duration":"9ms","reasons":{"keywords":2}}
2025-11-10 15:10:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":63269,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:20 [[32minfo[39m]: Starting batch analysis {"totalMessages":8,"maxConcurrent":3}
2025-11-10 15:10:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":63269,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":63270,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":63270,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":63271,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":63271,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:22 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63269,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1688,"cost":0.000181}
2025-11-10 15:10:22 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63270,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2151,"cost":0.000167}
2025-11-10 15:10:22 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63271,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2205,"cost":0.00016}
2025-11-10 15:10:22 [[32minfo[39m]: Making OpenRouter API call {"messageId":63272,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:22 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:22 [[32minfo[39m]: Getting OpenRouter client {"messageId":63272,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:22 [[32minfo[39m]: Making OpenRouter API call {"messageId":63273,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:22 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:22 [[32minfo[39m]: Getting OpenRouter client {"messageId":63273,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:22 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:22 [[32minfo[39m]: Getting OpenRouter client {"messageId":63274,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:22 [[32minfo[39m]: Making OpenRouter API call {"messageId":63274,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63273,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1327,"cost":0.000179}
2025-11-10 15:10:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63274,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1481,"cost":0.000163}
2025-11-10 15:10:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63272,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1831,"cost":0.000163}
2025-11-10 15:10:24 [[32minfo[39m]: Making OpenRouter API call {"messageId":63275,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:24 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:24 [[32minfo[39m]: Getting OpenRouter client {"messageId":63275,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:24 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:10:24 [[32minfo[39m]: Getting OpenRouter client {"messageId":63277,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:10:24 [[32minfo[39m]: Making OpenRouter API call {"messageId":63277,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:10:25 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63277,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1296,"cost":0.000182}
2025-11-10 15:10:26 [[32minfo[39m]: Batch analysis complete {"total":8,"analyzed":8,"failed":0,"matches":0,"totalCost":"0.001352","duration":5576}
2025-11-10 15:10:26 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63275,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1534,"cost":0.000157}
2025-11-10 15:10:26 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 15:10:26 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":8}
2025-11-10 15:10:26 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":8,"analyzed":8,"matches":0,"failed":0}
2025-11-10 15:11:05 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 15:11:10 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 15:11:10 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 15:11:10 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":2,"filtered":8,"filterRate":"80%","duration":"2ms","reasons":{"keywords":8}}
2025-11-10 15:11:10 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":2,"hasApiKey":true,"hasPrompt":true}
2025-11-10 15:11:10 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":2,"total":10}
2025-11-10 15:11:10 [[32minfo[39m]: Getting OpenRouter client {"messageId":63359,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:11:10 [[32minfo[39m]: Starting batch analysis {"totalMessages":2,"maxConcurrent":3}
2025-11-10 15:11:10 [[32minfo[39m]: Making OpenRouter API call {"messageId":63359,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:11:10 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:11:10 [[32minfo[39m]: Making OpenRouter API call {"messageId":63360,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:11:10 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:11:10 [[32minfo[39m]: Getting OpenRouter client {"messageId":63360,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:11:11 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63359,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1116,"cost":0.000215}
2025-11-10 15:11:12 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":2}
2025-11-10 15:11:12 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":2,"analyzed":2,"matches":0,"failed":0}
2025-11-10 15:11:12 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 15:11:12 [[32minfo[39m]: Batch analysis complete {"total":2,"analyzed":2,"failed":0,"matches":0,"totalCost":"0.000370","duration":1604}
2025-11-10 15:11:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":63360,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1602,"cost":0.000155}
2025-11-10 15:55:06 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 15:55:11 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 15:55:11 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 15:55:11 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":7,"total":10}
2025-11-10 15:55:11 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":7,"filtered":3,"filterRate":"30%","duration":"7ms","reasons":{"keywords":3}}
2025-11-10 15:55:11 [[32minfo[39m]: Starting batch analysis {"totalMessages":7,"maxConcurrent":3}
2025-11-10 15:55:11 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":7,"hasApiKey":true,"hasPrompt":true}
2025-11-10 15:55:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":64289,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":64289,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":64290,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":64290,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":64291,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":64291,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64289,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1430,"cost":0.000188}
2025-11-10 15:55:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64290,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1537,"cost":0.000213}
2025-11-10 15:55:13 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64291,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1890,"cost":0.000219}
2025-11-10 15:55:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":64292,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":64292,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":64294,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":64294,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":64295,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":64295,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:14 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64294,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1305,"cost":0.000156}
2025-11-10 15:55:14 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64292,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1549,"cost":0.000192}
2025-11-10 15:55:14 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64295,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1666,"cost":0.000163}
2025-11-10 15:55:14 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:14 [[32minfo[39m]: Getting OpenRouter client {"messageId":64298,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:14 [[32minfo[39m]: Making OpenRouter API call {"messageId":64298,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:16 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64298,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1195,"cost":0.000156}
2025-11-10 15:55:16 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 15:55:16 [[32minfo[39m]: Batch analysis complete {"total":7,"analyzed":7,"failed":0,"matches":0,"totalCost":"0.001287","duration":4759}
2025-11-10 15:55:16 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":7}
2025-11-10 15:55:16 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":7,"analyzed":7,"matches":0,"failed":0}
2025-11-10 15:55:31 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 15:55:36 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 15:55:36 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 15:55:36 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 15:55:36 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"2ms","reasons":{"keywords":9}}
2025-11-10 15:55:36 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 15:55:36 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 15:55:36 [[32minfo[39m]: Getting OpenRouter client {"messageId":64361,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 15:55:36 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 15:55:36 [[32minfo[39m]: Making OpenRouter API call {"messageId":64361,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 15:55:37 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64361,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1306,"cost":0.000168}
2025-11-10 15:55:37 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 15:55:37 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000168","duration":1308}
2025-11-10 15:55:37 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 15:55:37 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 16:31:21 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 16:31:26 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 16:31:26 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 16:31:26 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 16:31:26 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":1}
2025-11-10 16:31:26 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"3ms","reasons":{}}
2025-11-10 16:31:26 [[32minfo[39m]: Getting OpenRouter client {"messageId":64370,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:31:26 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 16:31:26 [[32minfo[39m]: Making OpenRouter API call {"messageId":64370,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:31:26 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:31:28 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":64370,"isMatch":true,"confidence":85,"validationPassed":true,"meetsThreshold":true,"duration":1615,"cost":0.000165}
2025-11-10 16:31:28 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 16:31:28 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":1,"totalCost":"0.000165","duration":1617}
2025-11-10 16:31:28 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":1,"failed":0}
2025-11-10 16:31:28 [[32minfo[39m]: Saved detected lead {"leadId":237,"messageId":64370,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","confidence":85}
2025-11-10 16:31:28 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237}
2025-11-10 16:31:28 [[32minfo[39m]: Lead detected and saved {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237,"confidence":85}
2025-11-10 16:31:28 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:31:29 [[32minfo[39m]: Message suggestion generated {"leadId":64370,"duration":1065,"cost":0.000072}
2025-11-10 16:31:29 [[32minfo[39m]: Message suggestion generated successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237,"hasSuggestion":true}
2025-11-10 16:31:29 [[32minfo[39m]: Posting lead to Telegram {"leadId":64370,"channelId":"-1002988109791","confidence":85,"hasSuggestion":true}
2025-11-10 16:31:29 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237,"channelId":"-1002988109791","hasMessageSuggestion":true,"messagePreview":"–∞ –∫—Ç–æ —Ö–æ—Ä–æ—à–æ –ª–∏–¥–≥–µ–Ω–∏—Ç –≤ —Ä–æ—Å—Å–∏–∏?–ø—Ä–∏–≤–µ—Ç"}
2025-11-10 16:31:29 [[32minfo[39m]: Telegram bot initialized successfully
2025-11-10 16:31:29 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1002988109791","messageId":3139}
2025-11-10 16:31:29 [[32minfo[39m]: Lead posted successfully {"leadId":64370,"messageId":3139,"channelId":"-1002988109791"}
2025-11-10 16:31:29 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237,"success":true,"messageId":3139}
2025-11-10 16:31:29 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":237,"telegramMessageId":3139,"hasSuggestion":true}
2025-11-10 16:34:32 [[32minfo[39m]: Deleted detected lead {"leadId":237,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 16:34:32 [[32minfo[39m]: Lead deleted {"leadId":237,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 16:55:51 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 16:55:56 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 16:55:56 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 16:55:56 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":6,"hasApiKey":true,"hasPrompt":true}
2025-11-10 16:55:56 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":6,"total":10}
2025-11-10 16:55:56 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":6,"filtered":4,"filterRate":"40%","duration":"3ms","reasons":{"keywords":2,"quality":2}}
2025-11-10 16:55:56 [[32minfo[39m]: Getting OpenRouter client {"messageId":65411,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:56 [[32minfo[39m]: Starting batch analysis {"totalMessages":6,"maxConcurrent":3}
2025-11-10 16:55:56 [[32minfo[39m]: Getting OpenRouter client {"messageId":65413,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:56 [[32minfo[39m]: Making OpenRouter API call {"messageId":65411,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:56 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:56 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:56 [[32minfo[39m]: Getting OpenRouter client {"messageId":65415,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:56 [[32minfo[39m]: Making OpenRouter API call {"messageId":65413,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:56 [[32minfo[39m]: Making OpenRouter API call {"messageId":65415,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:56 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:57 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65415,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1157,"cost":0.000145}
2025-11-10 16:55:58 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65411,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1568,"cost":0.000175}
2025-11-10 16:55:58 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65413,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1964,"cost":0.000176}
2025-11-10 16:55:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":65417,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":65417,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":65418,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":65418,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:55:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":65420,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:55:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":65420,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:55:59 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65418,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1216,"cost":0.00016}
2025-11-10 16:56:00 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65417,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1478,"cost":0.000168}
2025-11-10 16:56:00 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65420,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1566,"cost":0.000171}
2025-11-10 16:56:00 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 16:56:00 [[32minfo[39m]: Batch analysis complete {"total":6,"analyzed":6,"failed":0,"matches":0,"totalCost":"0.000995","duration":3539}
2025-11-10 16:56:00 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":6}
2025-11-10 16:56:00 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":6,"analyzed":6,"matches":0,"failed":0}
2025-11-10 16:56:16 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 16:56:21 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 16:56:21 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 16:56:21 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 16:56:21 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"2ms","reasons":{"keywords":7}}
2025-11-10 16:56:21 [[32minfo[39m]: Getting OpenRouter client {"messageId":65502,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:56:21 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 16:56:21 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 16:56:21 [[32minfo[39m]: Getting OpenRouter client {"messageId":65505,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:56:21 [[32minfo[39m]: Making OpenRouter API call {"messageId":65502,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:56:21 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:56:21 [[32minfo[39m]: Getting OpenRouter client {"messageId":65506,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 16:56:21 [[32minfo[39m]: Making OpenRouter API call {"messageId":65505,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:56:21 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:56:21 [[32minfo[39m]: Making OpenRouter API call {"messageId":65506,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 16:56:21 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 16:56:23 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65505,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1520,"cost":0.000186}
2025-11-10 16:56:23 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65506,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1709,"cost":0.000184}
2025-11-10 16:56:23 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65502,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2016,"cost":0.00019}
2025-11-10 16:56:23 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 16:56:23 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000560","duration":2021}
2025-11-10 16:56:23 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 16:56:23 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 17:33:20 [[32minfo[39m]: ========================================
2025-11-10 17:33:20 [[32minfo[39m]: Starting API server...
2025-11-10 17:33:20 [[32minfo[39m]: ========================================
2025-11-10 17:33:20 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 17:33:20 [[32minfo[39m]: Initializing database connection...
2025-11-10 17:33:20 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 17:33:22 [[32minfo[39m]: Database connection test successful
2025-11-10 17:33:22 [[32minfo[39m]: Server initialization complete
2025-11-10 17:33:22 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 17:33:22 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 17:33:22 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T17:33:22.519Z","interval":"5 seconds"}
2025-11-10 17:33:22 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 17:33:22 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 17:33:22 [[32minfo[39m]: ========================================
2025-11-10 17:33:22 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 17:33:22 [[32minfo[39m]: ========================================
2025-11-10 17:33:22 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 17:33:22 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 17:33:22 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 17:33:22 [[32minfo[39m]: üìù Environment: production
2025-11-10 17:33:27 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 17:33:32 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 17:33:32 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 17:33:32 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"4ms","reasons":{"keywords":7}}
2025-11-10 17:33:32 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 17:33:32 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 17:33:32 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 17:33:32 [[32minfo[39m]: Getting OpenRouter client {"messageId":65502,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:33:32 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:33:32 [[32minfo[39m]: Making OpenRouter API call {"messageId":65502,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:33:32 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:33:32 [[32minfo[39m]: Getting OpenRouter client {"messageId":65505,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:33:32 [[32minfo[39m]: Getting OpenRouter client {"messageId":65506,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:33:32 [[32minfo[39m]: Making OpenRouter API call {"messageId":65505,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:33:32 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:33:32 [[32minfo[39m]: Making OpenRouter API call {"messageId":65506,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:33:34 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 17:33:34 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65505,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1339,"cost":0.000172}
2025-11-10 17:33:34 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65502,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1715,"cost":0.00019}
2025-11-10 17:33:34 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":65506,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1735,"cost":0.000184}
2025-11-10 17:33:34 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 17:33:34 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 17:33:34 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 17:33:34 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000546","duration":1741}
2025-11-10 17:44:32 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 17:44:32 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 17:55:17 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 17:55:22 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 17:55:23 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 17:55:23 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":9,"total":10}
2025-11-10 17:55:23 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":9,"filtered":1,"filterRate":"10%","duration":"3ms","reasons":{"keywords":1}}
2025-11-10 17:55:23 [[32minfo[39m]: Starting batch analysis {"totalMessages":9,"maxConcurrent":3}
2025-11-10 17:55:23 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":9,"hasApiKey":true,"hasPrompt":true}
2025-11-10 17:55:23 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:23 [[32minfo[39m]: Getting OpenRouter client {"messageId":66347,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:23 [[32minfo[39m]: Getting OpenRouter client {"messageId":66349,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:23 [[32minfo[39m]: Making OpenRouter API call {"messageId":66347,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:23 [[32minfo[39m]: Getting OpenRouter client {"messageId":66350,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:23 [[32minfo[39m]: Making OpenRouter API call {"messageId":66349,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:23 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:23 [[32minfo[39m]: Making OpenRouter API call {"messageId":66350,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:23 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66350,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1191,"cost":0.000143}
2025-11-10 17:55:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66349,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1346,"cost":0.000157}
2025-11-10 17:55:24 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66347,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1723,"cost":0.00017}
2025-11-10 17:55:24 [[32minfo[39m]: Getting OpenRouter client {"messageId":66351,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:24 [[32minfo[39m]: Getting OpenRouter client {"messageId":66352,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:24 [[32minfo[39m]: Making OpenRouter API call {"messageId":66351,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:24 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:24 [[32minfo[39m]: Making OpenRouter API call {"messageId":66352,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:24 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:24 [[32minfo[39m]: Getting OpenRouter client {"messageId":66353,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:24 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:24 [[32minfo[39m]: Making OpenRouter API call {"messageId":66353,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:25 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66352,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1226,"cost":0.000159}
2025-11-10 17:55:26 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66353,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1360,"cost":0.000155}
2025-11-10 17:55:26 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66351,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1405,"cost":0.000156}
2025-11-10 17:55:26 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:26 [[32minfo[39m]: Getting OpenRouter client {"messageId":66354,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:26 [[32minfo[39m]: Getting OpenRouter client {"messageId":66355,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:26 [[32minfo[39m]: Making OpenRouter API call {"messageId":66354,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:26 [[32minfo[39m]: Making OpenRouter API call {"messageId":66355,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:26 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:26 [[32minfo[39m]: Making OpenRouter API call {"messageId":66356,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:26 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:26 [[32minfo[39m]: Getting OpenRouter client {"messageId":66356,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:27 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66354,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1209,"cost":0.000151}
2025-11-10 17:55:27 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66355,"isMatch":false,"confidence":20,"validationPassed":true,"meetsThreshold":false,"duration":1265,"cost":0.000162}
2025-11-10 17:55:27 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66356,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1287,"cost":0.000176}
2025-11-10 17:55:27 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":9,"analyzed":9,"matches":0,"failed":0}
2025-11-10 17:55:27 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 17:55:27 [[32minfo[39m]: Batch analysis complete {"total":9,"analyzed":9,"failed":0,"matches":0,"totalCost":"0.001429","duration":4420}
2025-11-10 17:55:27 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":9}
2025-11-10 17:55:42 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 17:55:47 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 17:55:47 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 17:55:47 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 17:55:47 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 17:55:47 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"2ms","reasons":{"keywords":7}}
2025-11-10 17:55:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":66421,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:47 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 17:55:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":66424,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":66421,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":66428,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 17:55:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":66424,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":66428,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 17:55:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 17:55:49 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66424,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1291,"cost":0.000175}
2025-11-10 17:55:49 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66428,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1365,"cost":0.000179}
2025-11-10 17:55:49 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66421,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1696,"cost":0.000189}
2025-11-10 17:55:49 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 17:55:49 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000543","duration":1698}
2025-11-10 17:55:49 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 17:55:49 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 18:21:53 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 18:21:58 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 18:21:58 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:21:58 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":1}
2025-11-10 18:21:58 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"3ms","reasons":{}}
2025-11-10 18:21:58 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 18:21:58 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:21:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":66430,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:21:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:21:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":66430,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:22:00 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66430,"isMatch":true,"confidence":80,"validationPassed":true,"meetsThreshold":true,"duration":1602,"cost":0.000163}
2025-11-10 18:22:00 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":1,"totalCost":"0.000163","duration":1606}
2025-11-10 18:22:00 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":1,"failed":0}
2025-11-10 18:22:00 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 18:22:00 [[32minfo[39m]: Saved detected lead {"leadId":238,"messageId":66430,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","confidence":80}
2025-11-10 18:22:00 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238}
2025-11-10 18:22:00 [[32minfo[39m]: Lead detected and saved {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238,"confidence":80}
2025-11-10 18:22:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:22:01 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238,"channelId":"-1002988109791","hasMessageSuggestion":true,"messagePreview":"–∞ –∫—Ç–æ —Ö–æ—Ä–æ—à–æ –ª–∏–¥–≥–µ–Ω–∏—Ç –≤ —Ä–æ—Å—Å–∏–∏?–ø—Ä–∏–≤–µ—Ç"}
2025-11-10 18:22:01 [[32minfo[39m]: Message suggestion generated successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238,"hasSuggestion":true}
2025-11-10 18:22:01 [[32minfo[39m]: Message suggestion generated {"leadId":66430,"duration":1183,"cost":0.000075}
2025-11-10 18:22:01 [[32minfo[39m]: Posting lead to Telegram {"leadId":66430,"channelId":"-1002988109791","confidence":80,"hasSuggestion":true}
2025-11-10 18:22:01 [[32minfo[39m]: Telegram bot initialized successfully
2025-11-10 18:22:01 [[32minfo[39m]: Lead posted successfully {"leadId":66430,"messageId":3140,"channelId":"-1002988109791"}
2025-11-10 18:22:01 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1002988109791","messageId":3140}
2025-11-10 18:22:01 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238,"success":true,"messageId":3140}
2025-11-10 18:22:01 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":238,"telegramMessageId":3140,"hasSuggestion":true}
2025-11-10 18:31:52 [[32minfo[39m]: ========================================
2025-11-10 18:31:52 [[32minfo[39m]: Starting API server...
2025-11-10 18:31:52 [[32minfo[39m]: ========================================
2025-11-10 18:31:52 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 18:31:52 [[32minfo[39m]: Initializing database connection...
2025-11-10 18:31:52 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 18:31:54 [[32minfo[39m]: Database connection test successful
2025-11-10 18:31:54 [[32minfo[39m]: Server initialization complete
2025-11-10 18:31:54 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 18:31:54 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 18:31:54 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T18:31:54.794Z","interval":"5 seconds"}
2025-11-10 18:31:54 [[32minfo[39m]: ========================================
2025-11-10 18:31:54 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 18:31:54 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 18:31:54 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 18:31:54 [[32minfo[39m]: ========================================
2025-11-10 18:31:54 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 18:31:54 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 18:31:54 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 18:31:54 [[32minfo[39m]: üìù Environment: production
2025-11-10 18:31:59 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 18:32:04 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 18:32:04 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:32:04 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"4ms","reasons":{"keywords":6}}
2025-11-10 18:32:04 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:32:04 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":4,"total":10}
2025-11-10 18:32:04 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 18:32:04 [[32minfo[39m]: Getting OpenRouter client {"messageId":66421,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:32:04 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:32:04 [[32minfo[39m]: Getting OpenRouter client {"messageId":66424,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:32:04 [[32minfo[39m]: Making OpenRouter API call {"messageId":66421,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:32:04 [[32minfo[39m]: Making OpenRouter API call {"messageId":66424,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:32:04 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:32:04 [[32minfo[39m]: Making OpenRouter API call {"messageId":66428,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:32:04 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:32:04 [[32minfo[39m]: Getting OpenRouter client {"messageId":66428,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:32:06 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66428,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1154,"cost":0.000179}
2025-11-10 18:32:06 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66424,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1460,"cost":0.000175}
2025-11-10 18:32:06 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66421,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1695,"cost":0.000189}
2025-11-10 18:32:06 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:32:06 [[32minfo[39m]: Getting OpenRouter client {"messageId":66430,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:32:06 [[32minfo[39m]: Making OpenRouter API call {"messageId":66430,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:32:06 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 18:32:08 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66430,"isMatch":true,"confidence":85,"validationPassed":true,"meetsThreshold":true,"duration":1330,"cost":0.000165}
2025-11-10 18:32:08 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 18:32:08 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":1,"totalCost":"0.000708","duration":3028}
2025-11-10 18:32:08 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":4,"analyzed":4,"matches":1,"failed":0}
2025-11-10 18:32:08 [[32minfo[39m]: Lead detected and saved {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239,"confidence":85}
2025-11-10 18:32:08 [[32minfo[39m]: Saved detected lead {"leadId":239,"messageId":66430,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","confidence":85}
2025-11-10 18:32:08 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239}
2025-11-10 18:32:08 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:32:09 [[32minfo[39m]: Message suggestion generated {"leadId":66430,"duration":1105,"cost":0.000074}
2025-11-10 18:32:09 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239,"channelId":"-1002988109791","hasMessageSuggestion":true,"messagePreview":"–∞ –∫—Ç–æ —Ö–æ—Ä–æ—à–æ –ª–∏–¥–≥–µ–Ω–∏—Ç –≤ —Ä–æ—Å—Å–∏–∏?–ø—Ä–∏–≤–µ—Ç"}
2025-11-10 18:32:09 [[32minfo[39m]: Message suggestion generated successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239,"hasSuggestion":true}
2025-11-10 18:32:09 [[32minfo[39m]: Posting lead to Telegram {"leadId":66430,"channelId":"-1002988109791","confidence":85,"hasSuggestion":true}
2025-11-10 18:32:09 [[32minfo[39m]: Telegram bot initialized successfully
2025-11-10 18:32:09 [[32minfo[39m]: Lead posted successfully {"leadId":66430,"messageId":3141,"channelId":"-1002988109791"}
2025-11-10 18:32:09 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1002988109791","messageId":3141}
2025-11-10 18:32:09 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239,"success":true,"messageId":3141}
2025-11-10 18:32:09 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":239,"telegramMessageId":3141,"hasSuggestion":true}
2025-11-10 18:34:18 [[32minfo[39m]: Bulk delete leads {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","count":2}
2025-11-10 18:40:42 [[32minfo[39m]: ========================================
2025-11-10 18:40:42 [[32minfo[39m]: Starting API server...
2025-11-10 18:40:42 [[32minfo[39m]: ========================================
2025-11-10 18:40:42 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 18:40:42 [[32minfo[39m]: Initializing database connection...
2025-11-10 18:40:42 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 18:40:43 [[32minfo[39m]: Database connection test successful
2025-11-10 18:40:43 [[32minfo[39m]: Server initialization complete
2025-11-10 18:40:43 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 18:40:43 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 18:40:43 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T18:40:43.046Z","interval":"5 seconds"}
2025-11-10 18:40:43 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 18:40:43 [[32minfo[39m]: ========================================
2025-11-10 18:40:43 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 18:40:43 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 18:40:43 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 18:40:43 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 18:40:43 [[32minfo[39m]: ========================================
2025-11-10 18:40:43 [[32minfo[39m]: üìù Environment: production
2025-11-10 18:40:43 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 18:40:48 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 18:40:53 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 18:40:53 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:40:53 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"3ms","reasons":{"keywords":6}}
2025-11-10 18:40:53 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:40:53 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":4,"total":10}
2025-11-10 18:40:53 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 18:40:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":66421,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:40:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:40:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":66424,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:40:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":66421,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:40:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":66428,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:40:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":66424,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:40:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:40:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":66428,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:40:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:40:54 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66428,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1388,"cost":0.000179}
2025-11-10 18:40:55 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66421,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1775,"cost":0.000189}
2025-11-10 18:40:55 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66424,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1916,"cost":0.000175}
2025-11-10 18:40:55 [[32minfo[39m]: Making OpenRouter API call {"messageId":66430,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:40:55 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:40:55 [[32minfo[39m]: Getting OpenRouter client {"messageId":66430,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:40:57 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":66430,"isMatch":true,"confidence":85,"validationPassed":true,"meetsThreshold":true,"duration":1845,"cost":0.000165}
2025-11-10 18:40:57 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 18:40:57 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":1,"totalCost":"0.000708","duration":3766}
2025-11-10 18:40:57 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":4,"analyzed":4,"matches":1,"failed":0}
2025-11-10 18:40:57 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 18:40:57 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:40:57 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240}
2025-11-10 18:40:57 [[32minfo[39m]: Lead detected and saved {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240,"confidence":85}
2025-11-10 18:40:57 [[32minfo[39m]: Saved detected lead {"leadId":240,"messageId":66430,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","confidence":85}
2025-11-10 18:40:58 [[32minfo[39m]: Message suggestion generated {"leadId":66430,"duration":1400,"cost":0.000073}
2025-11-10 18:40:58 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240,"channelId":"-1002988109791","hasMessageSuggestion":true,"messagePreview":"–∞ –∫—Ç–æ —Ö–æ—Ä–æ—à–æ –ª–∏–¥–≥–µ–Ω–∏—Ç –≤ —Ä–æ—Å—Å–∏–∏?–ø—Ä–∏–≤–µ—Ç"}
2025-11-10 18:40:58 [[32minfo[39m]: Message suggestion generated successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240,"hasSuggestion":true}
2025-11-10 18:40:58 [[32minfo[39m]: Posting lead to Telegram {"leadId":66430,"channelId":"-1002988109791","confidence":85,"hasSuggestion":true}
2025-11-10 18:40:58 [[32minfo[39m]: Telegram bot initialized successfully
2025-11-10 18:40:58 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1002988109791","messageId":3142}
2025-11-10 18:40:58 [[32minfo[39m]: Lead posted successfully {"leadId":66430,"messageId":3142,"channelId":"-1002988109791"}
2025-11-10 18:40:58 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240,"success":true,"messageId":3142}
2025-11-10 18:40:58 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":240,"telegramMessageId":3142,"hasSuggestion":true}
2025-11-10 18:43:37 [[32minfo[39m]: Lead deleted {"leadId":240,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 18:43:37 [[32minfo[39m]: Deleted detected lead {"leadId":240,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 18:43:55 [[32minfo[39m]: Delete all leads {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 18:54:47 [[32minfo[39m]: ========================================
2025-11-10 18:54:47 [[32minfo[39m]: ========================================
2025-11-10 18:54:47 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 18:54:47 [[32minfo[39m]: Initializing database connection...
2025-11-10 18:54:47 [[32minfo[39m]: Starting API server...
2025-11-10 18:54:47 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 18:54:49 [[32minfo[39m]: Database connection test successful
2025-11-10 18:54:49 [[32minfo[39m]: Server initialization complete
2025-11-10 18:54:49 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 18:54:49 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 18:54:49 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T18:54:49.819Z","interval":"5 seconds"}
2025-11-10 18:54:49 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 18:54:49 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 18:54:49 [[32minfo[39m]: ========================================
2025-11-10 18:54:49 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 18:54:49 [[32minfo[39m]: ========================================
2025-11-10 18:54:49 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 18:54:49 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 18:54:49 [[32minfo[39m]: üìù Environment: production
2025-11-10 18:54:49 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 18:54:53 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 18:54:54 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 18:54:58 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 18:54:58 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:54:58 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":7,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:54:58 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":7,"total":10}
2025-11-10 18:54:58 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":7,"filtered":3,"filterRate":"30%","duration":"3ms","reasons":{"keywords":3}}
2025-11-10 18:54:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":67069,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:54:58 [[32minfo[39m]: Starting batch analysis {"totalMessages":7,"maxConcurrent":3}
2025-11-10 18:54:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:54:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:54:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":67070,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:54:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":67069,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:54:58 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:54:58 [[32minfo[39m]: Getting OpenRouter client {"messageId":67072,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:54:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":67070,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:54:58 [[32minfo[39m]: Making OpenRouter API call {"messageId":67072,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:54:59 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67070,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1229,"cost":0.000157}
2025-11-10 18:54:59 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 18:55:00 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:55:00 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":7,"total":10}
2025-11-10 18:55:00 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":7,"filtered":3,"filterRate":"30%","duration":"5ms","reasons":{"keywords":3}}
2025-11-10 18:55:00 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":7,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:55:00 [[32minfo[39m]: Starting batch analysis {"totalMessages":7,"maxConcurrent":3}
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67069,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67070,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67069,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67070,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67072,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67072,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67072,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1727,"cost":0.000165}
2025-11-10 18:55:00 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67069,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1973,"cost":0.000157}
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67074,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67076,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67074,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: Getting OpenRouter client {"messageId":67077,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67076,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:00 [[32minfo[39m]: Making OpenRouter API call {"messageId":67077,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:00 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:01 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67069,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1415,"cost":0.000157}
2025-11-10 18:55:01 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67070,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1471,"cost":0.000157}
2025-11-10 18:55:01 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67072,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1593,"cost":0.000166}
2025-11-10 18:55:01 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:01 [[32minfo[39m]: Getting OpenRouter client {"messageId":67074,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:01 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:01 [[32minfo[39m]: Getting OpenRouter client {"messageId":67076,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:01 [[32minfo[39m]: Making OpenRouter API call {"messageId":67074,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:01 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:01 [[32minfo[39m]: Getting OpenRouter client {"messageId":67077,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:01 [[32minfo[39m]: Making OpenRouter API call {"messageId":67076,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:01 [[32minfo[39m]: Making OpenRouter API call {"messageId":67077,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:01 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67077,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1519,"cost":0.000166}
2025-11-10 18:55:01 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67074,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1526,"cost":0.000179}
2025-11-10 18:55:02 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 18:55:03 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67076,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1419,"cost":0.000169}
2025-11-10 18:55:03 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67074,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1451,"cost":0.000179}
2025-11-10 18:55:03 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67077,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1516,"cost":0.000166}
2025-11-10 18:55:03 [[32minfo[39m]: Getting OpenRouter client {"messageId":67078,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:03 [[32minfo[39m]: Making OpenRouter API call {"messageId":67078,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:03 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:04 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67078,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1422,"cost":0.000157}
2025-11-10 18:55:04 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 18:55:04 [[32minfo[39m]: Batch analysis complete {"total":7,"analyzed":7,"failed":0,"matches":0,"totalCost":"0.001151","duration":4543}
2025-11-10 18:55:04 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":7}
2025-11-10 18:55:04 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":7,"analyzed":7,"matches":0,"failed":0}
2025-11-10 18:55:14 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 18:55:19 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 18:55:20 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 18:55:20 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"4ms","reasons":{"keywords":9}}
2025-11-10 18:55:20 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 18:55:20 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 18:55:20 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 18:55:20 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 18:55:20 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 18:55:20 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 18:55:21 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1844,"cost":0.000189}
2025-11-10 18:55:21 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 18:55:21 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 18:55:21 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":1845}
2025-11-10 18:55:21 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:00:35 [[32minfo[39m]: ========================================
2025-11-10 19:00:35 [[32minfo[39m]: ========================================
2025-11-10 19:00:35 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:00:35 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:00:35 [[32minfo[39m]: Starting API server...
2025-11-10 19:00:35 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:00:37 [[32minfo[39m]: Database connection test successful
2025-11-10 19:00:37 [[32minfo[39m]: Server initialization complete
2025-11-10 19:00:37 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:00:37 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:00:37 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:00:37 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:00:37 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:00:37.147Z","interval":"5 seconds"}
2025-11-10 19:00:37 [[32minfo[39m]: ========================================
2025-11-10 19:00:37 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:00:37 [[32minfo[39m]: ========================================
2025-11-10 19:00:37 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:00:37 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:00:37 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:00:37 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:00:42 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:00:47 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:00:47 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:00:47 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"4ms","reasons":{"keywords":9}}
2025-11-10 19:00:47 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:00:47 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 19:00:47 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 19:00:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:00:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:00:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:00:48 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1548,"cost":0.000189}
2025-11-10 19:00:48 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 19:00:48 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:00:48 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":1550}
2025-11-10 19:00:48 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:00:49 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:03:33 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 19:03:33 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 19:03:45 [[32minfo[39m]: User configuration updated {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","fields":["is_active"]}
2025-11-10 19:03:45 [[32minfo[39m]: Saved user config {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14"}
2025-11-10 19:05:25 [[32minfo[39m]: ========================================
2025-11-10 19:05:25 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:05:25 [[32minfo[39m]: Starting API server...
2025-11-10 19:05:25 [[32minfo[39m]: ========================================
2025-11-10 19:05:25 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:05:25 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:05:25 [[32minfo[39m]: Database connection test successful
2025-11-10 19:05:25 [[32minfo[39m]: Server initialization complete
2025-11-10 19:05:25 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:05:25 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:05:25 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:05:25 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:05:25.947Z","interval":"5 seconds"}
2025-11-10 19:05:25 [[32minfo[39m]: ========================================
2025-11-10 19:05:25 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:05:25 [[32minfo[39m]: ========================================
2025-11-10 19:05:25 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:05:25 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:05:25 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:05:25 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:05:25 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:05:31 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:05:36 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:05:36 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:05:36 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:05:36 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 19:05:36 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"3ms","reasons":{"keywords":9}}
2025-11-10 19:05:36 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 19:05:36 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:05:36 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:05:36 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:05:37 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1744,"cost":0.000189}
2025-11-10 19:05:37 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:05:37 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":1747}
2025-11-10 19:05:37 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:05:37 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 19:05:39 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:17:24 [[32minfo[39m]: ========================================
2025-11-10 19:17:24 [[32minfo[39m]: Starting API server...
2025-11-10 19:17:24 [[32minfo[39m]: ========================================
2025-11-10 19:17:24 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:17:24 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:17:24 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:17:26 [[32minfo[39m]: Database connection test successful
2025-11-10 19:17:26 [[32minfo[39m]: Server initialization complete
2025-11-10 19:17:26 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:17:26 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:17:26 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:17:26 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:17:26 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:17:26.614Z","interval":"5 seconds"}
2025-11-10 19:17:26 [[32minfo[39m]: ========================================
2025-11-10 19:17:26 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:17:26 [[32minfo[39m]: ========================================
2025-11-10 19:17:26 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:17:26 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:17:26 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:17:26 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:17:31 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:17:36 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:17:36 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:17:36 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 19:17:36 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"3ms","reasons":{"keywords":9}}
2025-11-10 19:17:36 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 19:17:36 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:17:36 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:17:36 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:17:36 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:17:39 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:17:41 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":4284,"cost":0.000189}
2025-11-10 19:17:41 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:17:41 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":4287}
2025-11-10 19:17:41 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:17:41 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 19:24:16 [[32minfo[39m]: ========================================
2025-11-10 19:24:16 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:24:16 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:24:16 [[32minfo[39m]: Starting API server...
2025-11-10 19:24:16 [[32minfo[39m]: ========================================
2025-11-10 19:24:16 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:24:18 [[32minfo[39m]: Database connection test successful
2025-11-10 19:24:18 [[32minfo[39m]: Server initialization complete
2025-11-10 19:24:18 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:24:18 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:24:18 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:24:18 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:24:18.892Z","interval":"5 seconds"}
2025-11-10 19:24:18 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:24:18 [[32minfo[39m]: ========================================
2025-11-10 19:24:18 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:24:18 [[32minfo[39m]: ========================================
2025-11-10 19:24:18 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:24:18 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:24:18 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:24:18 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:24:24 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:24:29 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:24:29 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:24:29 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 19:24:29 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"3ms","reasons":{"keywords":9}}
2025-11-10 19:24:29 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 19:24:29 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:24:29 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:24:29 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:24:29 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:24:30 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1387,"cost":0.000189}
2025-11-10 19:24:30 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:24:30 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":1390}
2025-11-10 19:24:30 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:24:30 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 19:24:30 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:41:25 [[32minfo[39m]: ========================================
2025-11-10 19:41:25 [[32minfo[39m]: Starting API server...
2025-11-10 19:41:25 [[32minfo[39m]: ========================================
2025-11-10 19:41:25 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:41:25 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:41:25 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:41:28 [[32minfo[39m]: Database connection test successful
2025-11-10 19:41:28 [[32minfo[39m]: Server initialization complete
2025-11-10 19:41:28 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:41:28 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:41:28 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:41:28.260Z","interval":"5 seconds"}
2025-11-10 19:41:28 [[32minfo[39m]: ========================================
2025-11-10 19:41:28 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:41:28 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:41:28 [[32minfo[39m]: ========================================
2025-11-10 19:41:28 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:41:28 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:41:28 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:41:28 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:41:28 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:41:33 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:41:38 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:41:38 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:41:38 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":1,"filtered":9,"filterRate":"90%","duration":"5ms","reasons":{"keywords":9}}
2025-11-10 19:41:38 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:41:38 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":10}
2025-11-10 19:41:38 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 19:41:38 [[32minfo[39m]: Getting OpenRouter client {"messageId":67134,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:41:38 [[32minfo[39m]: Making OpenRouter API call {"messageId":67134,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:41:38 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:41:40 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:41:40 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 19:41:40 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 19:41:40 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:41:40 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000189","duration":1881}
2025-11-10 19:41:40 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67134,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1879,"cost":0.000189}
2025-11-10 19:47:06 [[32minfo[39m]: Saved user config {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 19:47:06 [[32minfo[39m]: User configuration saved {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 19:53:28 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:53:33 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:53:33 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:53:33 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":10,"total":10}
2025-11-10 19:53:33 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":10,"filtered":0,"filterRate":"0%","duration":"3ms","reasons":{}}
2025-11-10 19:53:33 [[32minfo[39m]: Starting batch analysis {"totalMessages":10,"maxConcurrent":3}
2025-11-10 19:53:33 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":10,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:53:33 [[32minfo[39m]: Getting OpenRouter client {"messageId":67711,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:33 [[32minfo[39m]: Getting OpenRouter client {"messageId":67712,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:33 [[32minfo[39m]: Making OpenRouter API call {"messageId":67711,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:33 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:33 [[32minfo[39m]: Getting OpenRouter client {"messageId":67713,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:33 [[32minfo[39m]: Making OpenRouter API call {"messageId":67712,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:33 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:33 [[32minfo[39m]: Making OpenRouter API call {"messageId":67713,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:33 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:35 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67712,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1418,"cost":0.000157}
2025-11-10 19:53:35 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67713,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1446,"cost":0.000157}
2025-11-10 19:53:35 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67711,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1529,"cost":0.000157}
2025-11-10 19:53:35 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:35 [[32minfo[39m]: Getting OpenRouter client {"messageId":67714,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:35 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:35 [[32minfo[39m]: Getting OpenRouter client {"messageId":67715,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:35 [[32minfo[39m]: Making OpenRouter API call {"messageId":67714,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:35 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:35 [[32minfo[39m]: Getting OpenRouter client {"messageId":67716,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:35 [[32minfo[39m]: Making OpenRouter API call {"messageId":67715,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:35 [[32minfo[39m]: Making OpenRouter API call {"messageId":67716,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:36 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67715,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":939,"cost":0.00015}
2025-11-10 19:53:36 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67716,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1414,"cost":0.000157}
2025-11-10 19:53:41 [[32minfo[39m]: Making OpenRouter API call {"messageId":67719,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:41 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:41 [[32minfo[39m]: Getting OpenRouter client {"messageId":67719,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:41 [[32minfo[39m]: Making OpenRouter API call {"messageId":67718,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:41 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:41 [[32minfo[39m]: Getting OpenRouter client {"messageId":67718,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:41 [[32minfo[39m]: Making OpenRouter API call {"messageId":67717,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:41 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:41 [[32minfo[39m]: Getting OpenRouter client {"messageId":67717,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:41 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67714,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":6574,"cost":0.000157}
2025-11-10 19:53:42 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67717,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1194,"cost":0.000157}
2025-11-10 19:53:42 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67719,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1210,"cost":0.000157}
2025-11-10 19:53:43 [[32minfo[39m]: Getting OpenRouter client {"messageId":67720,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:53:43 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67718,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1441,"cost":0.000157}
2025-11-10 19:53:43 [[32minfo[39m]: Making OpenRouter API call {"messageId":67720,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:43 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:44 [[32minfo[39m]: Making OpenRouter API call {"messageId":67720,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:44 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:44 [[32minfo[39m]: Getting OpenRouter client {"messageId":67720,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:53:44 [[32minfo[39m]: Making OpenRouter API call {"messageId":67715,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:53:44 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:53:44 [[32minfo[39m]: Getting OpenRouter client {"messageId":67715,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:53:44 [[32minfo[39m]: Starting batch analysis {"totalMessages":2,"maxConcurrent":3}
2025-11-10 19:53:44 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":2,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:53:44 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":2,"total":10}
2025-11-10 19:53:44 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":2,"filtered":8,"filterRate":"80%","duration":"1ms","reasons":{"keywords":8}}
2025-11-10 19:53:44 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 19:53:44 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":10}
2025-11-10 19:53:44 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":10,"analyzed":10,"matches":0,"failed":0}
2025-11-10 19:53:44 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:53:44 [[32minfo[39m]: Batch analysis complete {"total":10,"analyzed":10,"failed":0,"matches":0,"totalCost":"0.001567","duration":10890}
2025-11-10 19:53:44 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67720,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1343,"cost":0.000161}
2025-11-10 19:53:45 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67720,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":924,"cost":0.000114}
2025-11-10 19:53:45 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67715,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1112,"cost":0.000111}
2025-11-10 19:53:45 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:53:45 [[32minfo[39m]: Batch analysis complete {"total":2,"analyzed":2,"failed":0,"matches":0,"totalCost":"0.000225","duration":1114}
2025-11-10 19:53:45 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":2}
2025-11-10 19:53:45 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":2,"analyzed":2,"matches":0,"failed":0}
2025-11-10 19:54:08 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:54:13 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:54:13 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:54:13 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:54:13 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":4,"total":10}
2025-11-10 19:54:13 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"3ms","reasons":{"keywords":6}}
2025-11-10 19:54:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":67762,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:54:13 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 19:54:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":67763,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:54:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":67762,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:13 [[32minfo[39m]: Getting OpenRouter client {"messageId":67769,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:54:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":67763,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:13 [[32minfo[39m]: Making OpenRouter API call {"messageId":67769,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:13 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:14 [[33mwarn[39m]: AI response validation failed (structure) {"messageId":67762,"reason":"Invalid response structure"}
2025-11-10 19:54:14 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67762,"isMatch":false,"validationPassed":false,"meetsThreshold":false,"duration":925,"cost":0.000157}
2025-11-10 19:54:14 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67769,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1243,"cost":0.000189}
2025-11-10 19:54:15 [[32minfo[39m]: Getting OpenRouter client {"messageId":67771,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:54:15 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67763,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1548,"cost":0.000169}
2025-11-10 19:54:15 [[32minfo[39m]: Making OpenRouter API call {"messageId":67771,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:15 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:16 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:54:16 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":0,"totalCost":"0.000670","duration":3037}
2025-11-10 19:54:16 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67771,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1486,"cost":0.000155}
2025-11-10 19:54:16 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 19:54:16 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":4}
2025-11-10 19:54:16 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":4,"analyzed":4,"matches":0,"failed":0}
2025-11-10 19:54:16 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"1ms","reasons":{"keywords":6}}
2025-11-10 19:54:16 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:54:16 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":4,"total":10}
2025-11-10 19:54:16 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:16 [[32minfo[39m]: Getting OpenRouter client {"messageId":67762,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:54:16 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 19:54:16 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:16 [[32minfo[39m]: Getting OpenRouter client {"messageId":67763,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:54:16 [[32minfo[39m]: Making OpenRouter API call {"messageId":67762,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:16 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:16 [[32minfo[39m]: Getting OpenRouter client {"messageId":67769,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:54:16 [[32minfo[39m]: Making OpenRouter API call {"messageId":67763,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:16 [[32minfo[39m]: Making OpenRouter API call {"messageId":67769,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:17 [[33mwarn[39m]: AI response validation failed (structure) {"messageId":67762,"reason":"Invalid response structure"}
2025-11-10 19:54:17 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67762,"isMatch":false,"validationPassed":false,"meetsThreshold":false,"duration":813,"cost":0.000111}
2025-11-10 19:54:17 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67763,"isMatch":false,"confidence":5,"validationPassed":true,"meetsThreshold":false,"duration":954,"cost":0.000124}
2025-11-10 19:54:17 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67769,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":1043,"cost":0.000144}
2025-11-10 19:54:17 [[32minfo[39m]: Getting OpenRouter client {"messageId":67771,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:54:17 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:54:17 [[32minfo[39m]: Making OpenRouter API call {"messageId":67771,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:54:18 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67771,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":735,"cost":0.000108}
2025-11-10 19:54:18 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:54:18 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":0,"totalCost":"0.000487","duration":1781}
2025-11-10 19:54:18 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":4}
2025-11-10 19:54:18 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":4,"analyzed":4,"matches":0,"failed":0}
2025-11-10 19:56:33 [[32minfo[39m]: ========================================
2025-11-10 19:56:33 [[32minfo[39m]: ========================================
2025-11-10 19:56:33 [[32minfo[39m]: Telegram Lead Scanner & Analyzer
2025-11-10 19:56:33 [[32minfo[39m]: Initializing database connection...
2025-11-10 19:56:33 [[32minfo[39m]: Starting API server...
2025-11-10 19:56:33 [[32minfo[39m]: Supabase client initialized successfully
2025-11-10 19:56:35 [[32minfo[39m]: Database connection test successful
2025-11-10 19:56:35 [[32minfo[39m]: Server initialization complete
2025-11-10 19:56:35 [[32minfo[39m]: üöÄ Starting scanner automatically...
2025-11-10 19:56:35 [[32minfo[39m]: üîÑ Starting Realtime Message Scanner (polling mode)...
2025-11-10 19:56:35 [[32minfo[39m]: ‚úÖ Scanner started successfully (24/7 mode)
2025-11-10 19:56:35 [[32minfo[39m]: ‚úÖ Realtime scanner started successfully (polling mode) {"subscribedAt":"2025-11-10T19:56:35.207Z","interval":"5 seconds"}
2025-11-10 19:56:35 [[32minfo[39m]: ü§ñ Starting Mini App bot...
2025-11-10 19:56:35 [[32minfo[39m]: üí° Users control their own analysis via "Active/Paused" toggle
2025-11-10 19:56:35 [[32minfo[39m]: ‚úÖ Mini App Bot started
2025-11-10 19:56:35 [[32minfo[39m]: ‚úÖ Mini App bot started (if token provided)
2025-11-10 19:56:35 [[32minfo[39m]: ü§ñ Mini App bot is ready. Users can send /start to get Web App button.
2025-11-10 19:56:35 [[32minfo[39m]: ========================================
2025-11-10 19:56:35 [[32minfo[39m]: ‚úÖ Application started successfully
2025-11-10 19:56:35 [[32minfo[39m]: ========================================
2025-11-10 19:56:35 [[32minfo[39m]: üìä Health check: http://localhost:3000/health
2025-11-10 19:56:35 [[32minfo[39m]: üöÄ Server running on port 3000
2025-11-10 19:56:35 [[32minfo[39m]: üìù Environment: production
2025-11-10 19:56:35 [[32minfo[39m]: üîó API: http://localhost:3000/api
2025-11-10 19:56:40 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 19:56:45 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 19:56:45 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 19:56:45 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"3ms","reasons":{"keywords":6}}
2025-11-10 19:56:45 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:56:45 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":4,"total":10}
2025-11-10 19:56:45 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 19:56:45 [[32minfo[39m]: Getting OpenRouter client {"messageId":67762,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:56:45 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:45 [[32minfo[39m]: Making OpenRouter API call {"messageId":67762,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:45 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:45 [[32minfo[39m]: Getting OpenRouter client {"messageId":67763,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:56:45 [[32minfo[39m]: Making OpenRouter API call {"messageId":67763,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:45 [[32minfo[39m]: Making OpenRouter API call {"messageId":67769,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:45 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:45 [[32minfo[39m]: Getting OpenRouter client {"messageId":67769,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:56:46 [[33mwarn[39m]: AI response validation failed (structure) {"messageId":67762,"reason":"Invalid response structure"}
2025-11-10 19:56:46 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67762,"isMatch":false,"validationPassed":false,"meetsThreshold":false,"duration":1205,"cost":0.000157}
2025-11-10 19:56:46 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67763,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1323,"cost":0.000168}
2025-11-10 19:56:46 [[32minfo[39m]: Getting OpenRouter client {"messageId":67771,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 19:56:46 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67769,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1369,"cost":0.000189}
2025-11-10 19:56:46 [[32minfo[39m]: Making OpenRouter API call {"messageId":67771,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:46 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:47 [[32minfo[39m]: SIGTERM received, shutting down gracefully
2025-11-10 19:56:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":67762,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":67762,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:56:47 [[32minfo[39m]: Starting batch analysis {"totalMessages":4,"maxConcurrent":3}
2025-11-10 19:56:47 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":4,"hasApiKey":true,"hasPrompt":true}
2025-11-10 19:56:47 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":4,"total":10}
2025-11-10 19:56:47 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":4,"filtered":6,"filterRate":"60%","duration":"1ms","reasons":{"keywords":6}}
2025-11-10 19:56:47 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 19:56:47 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":4}
2025-11-10 19:56:47 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":4,"analyzed":4,"matches":0,"failed":0}
2025-11-10 19:56:47 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:56:47 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":0,"totalCost":"0.000667","duration":2464}
2025-11-10 19:56:47 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67771,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1089,"cost":0.000153}
2025-11-10 19:56:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":67763,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:56:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":67769,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:56:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":67763,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":67769,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:48 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67769,"isMatch":false,"confidence":100,"validationPassed":true,"meetsThreshold":true,"duration":860,"cost":0.000144}
2025-11-10 19:56:48 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67763,"isMatch":false,"confidence":5,"validationPassed":true,"meetsThreshold":false,"duration":985,"cost":0.000124}
2025-11-10 19:56:49 [[33mwarn[39m]: AI response validation failed (structure) {"messageId":67762,"reason":"Invalid response structure"}
2025-11-10 19:56:49 [[32minfo[39m]: Getting OpenRouter client {"messageId":67771,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 19:56:49 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67762,"isMatch":false,"validationPassed":false,"meetsThreshold":false,"duration":1179,"cost":0.000111}
2025-11-10 19:56:49 [[32minfo[39m]: Making OpenRouter API call {"messageId":67771,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 19:56:49 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 19:56:49 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67771,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":736,"cost":0.000107}
2025-11-10 19:56:49 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":4,"analyzed":4,"matches":0,"failed":0}
2025-11-10 19:56:49 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 19:56:49 [[32minfo[39m]: Batch analysis complete {"total":4,"analyzed":4,"failed":0,"matches":0,"totalCost":"0.000486","duration":1917}
2025-11-10 19:56:49 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":4}
2025-11-10 20:14:27 [[32minfo[39m]: Saved user config {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 20:14:27 [[32minfo[39m]: User configuration updated {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 20:22:45 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 20:22:50 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 20:22:50 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:22:50 [[32minfo[39m]: No messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1}
2025-11-10 20:22:50 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"2ms","reasons":{"keywords":1}}
2025-11-10 20:22:50 [[32minfo[39m]: No messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1}
2025-11-10 20:22:50 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"0ms","reasons":{"keywords":1}}
2025-11-10 20:22:50 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 20:25:45 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 20:25:50 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 20:25:50 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"2ms","reasons":{"keywords":1}}
2025-11-10 20:25:50 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:25:50 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 20:25:50 [[32minfo[39m]: No messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1}
2025-11-10 20:25:50 [[32minfo[39m]: No messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1}
2025-11-10 20:25:50 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"0ms","reasons":{"keywords":1}}
2025-11-10 20:28:40 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 20:28:45 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 20:28:45 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:28:45 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"1ms","reasons":{}}
2025-11-10 20:28:45 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 20:28:45 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:28:45 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":1}
2025-11-10 20:28:45 [[32minfo[39m]: Getting OpenRouter client {"messageId":67774,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:28:45 [[32minfo[39m]: Making OpenRouter API call {"messageId":67774,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:28:45 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:28:47 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67774,"isMatch":true,"confidence":75,"validationPassed":true,"meetsThreshold":true,"duration":1313,"cost":0.000168}
2025-11-10 20:28:47 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":1,"totalCost":"0.000168","duration":1314}
2025-11-10 20:28:47 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":1,"failed":0}
2025-11-10 20:28:47 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:28:47 [[32minfo[39m]: Saved detected lead {"leadId":241,"messageId":67774,"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","confidence":75}
2025-11-10 20:28:47 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241}
2025-11-10 20:28:47 [[32minfo[39m]: Lead detected and saved {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241,"confidence":75}
2025-11-10 20:28:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:28:48 [[32minfo[39m]: Message suggestion generated successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241,"hasSuggestion":true}
2025-11-10 20:28:48 [[32minfo[39m]: Message suggestion generated {"leadId":67774,"duration":1348,"cost":0.000078}
2025-11-10 20:28:48 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241,"channelId":"-1002988109791","hasMessageSuggestion":true,"messagePreview":"–≤–æ—Ç –∫—Ç–æ –ø–æ–¥—Å–∫–∞–∑–∞–ª –ª–∏–¥–≥–µ–Ω –∫–æ–º–∞–Ω–¥—É —Ö–æ—Ä–æ—à—É—é"}
2025-11-10 20:28:48 [[32minfo[39m]: Posting lead to Telegram {"leadId":67774,"channelId":"-1002988109791","confidence":75,"hasSuggestion":true}
2025-11-10 20:28:48 [[32minfo[39m]: Telegram bot initialized successfully
2025-11-10 20:28:48 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1002988109791","messageId":3143}
2025-11-10 20:28:48 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241,"success":true,"messageId":3143}
2025-11-10 20:28:48 [[32minfo[39m]: Lead posted successfully {"leadId":67774,"messageId":3143,"channelId":"-1002988109791"}
2025-11-10 20:28:48 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","leadId":241,"telegramMessageId":3143,"hasSuggestion":true}
2025-11-10 20:28:48 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"1ms","reasons":{}}
2025-11-10 20:28:48 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":3,"mode":"quality + keywords"}
2025-11-10 20:28:48 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 20:28:48 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:28:48 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":1,"total":1}
2025-11-10 20:28:48 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:28:48 [[32minfo[39m]: Getting OpenRouter client {"messageId":67774,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:28:48 [[32minfo[39m]: Making OpenRouter API call {"messageId":67774,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:28:50 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":67774,"isMatch":false,"confidence":20,"validationPassed":true,"meetsThreshold":false,"duration":1028,"cost":0.000108}
2025-11-10 20:28:50 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:28:50 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000108","duration":1031}
2025-11-10 20:28:50 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":1}
2025-11-10 20:28:50 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 20:47:41 [[32minfo[39m]: Saved user config {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 20:47:41 [[32minfo[39m]: User configuration updated {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 20:49:00 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 20:49:05 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 20:49:05 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"3ms","reasons":{"keywords":1}}
2025-11-10 20:49:05 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:49:05 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":12,"mode":"quality + keywords"}
2025-11-10 20:49:05 [[32minfo[39m]: No messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1}
2025-11-10 20:49:05 [[32minfo[39m]: No messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1}
2025-11-10 20:49:05 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"1ms","reasons":{"keywords":1}}
2025-11-10 20:50:01 [[32minfo[39m]: Saved user config {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 20:50:01 [[32minfo[39m]: User configuration updated {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 20:50:05 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 20:50:10 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 20:50:10 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"1ms","reasons":{"keywords":1}}
2025-11-10 20:50:10 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:50:10 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":12,"mode":"quality + keywords"}
2025-11-10 20:50:10 [[32minfo[39m]: No messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1}
2025-11-10 20:50:10 [[32minfo[39m]: No messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1}
2025-11-10 20:50:10 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":0,"filtered":1,"filterRate":"100%","duration":"1ms","reasons":{"keywords":1}}
2025-11-10 20:50:44 [[32minfo[39m]: Saved user config {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b"}
2025-11-10 20:50:44 [[32minfo[39m]: User configuration updated {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","fields":["lead_prompt","message_prompt","telegram_channel_id","is_active"]}
2025-11-10 20:53:45 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 20:53:50 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 20:53:51 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:53:51 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:53:51 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":3,"total":10}
2025-11-10 20:53:51 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"2ms","reasons":{"keywords":7}}
2025-11-10 20:53:51 [[32minfo[39m]: Getting OpenRouter client {"messageId":68365,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:53:51 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 20:53:51 [[32minfo[39m]: Making OpenRouter API call {"messageId":68365,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:51 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:51 [[32minfo[39m]: Getting OpenRouter client {"messageId":68366,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:53:51 [[32minfo[39m]: Making OpenRouter API call {"messageId":68366,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:51 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:51 [[32minfo[39m]: Making OpenRouter API call {"messageId":68367,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:51 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:51 [[32minfo[39m]: Getting OpenRouter client {"messageId":68367,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:53:52 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68365,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1559,"cost":0.000164}
2025-11-10 20:53:52 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68367,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1560,"cost":0.000161}
2025-11-10 20:53:53 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68366,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2064,"cost":0.000153}
2025-11-10 20:53:53 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:53:53 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000478","duration":2068}
2025-11-10 20:53:53 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":3}
2025-11-10 20:53:53 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 20:53:53 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":12,"mode":"quality + keywords"}
2025-11-10 20:53:53 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":3,"filtered":7,"filterRate":"70%","duration":"3ms","reasons":{"keywords":7}}
2025-11-10 20:53:53 [[32minfo[39m]: Starting batch analysis {"totalMessages":3,"maxConcurrent":3}
2025-11-10 20:53:53 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":3,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:53:53 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":3,"total":10}
2025-11-10 20:53:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":68365,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":68365,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:53:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":68367,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:53:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":68366,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:53 [[32minfo[39m]: Getting OpenRouter client {"messageId":68366,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:53:53 [[32minfo[39m]: Making OpenRouter API call {"messageId":68367,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:53:53 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:53:54 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68365,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1266,"cost":0.000178}
2025-11-10 20:53:54 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68367,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1478,"cost":0.00019}
2025-11-10 20:53:54 [[32minfo[39m]: Batch analysis complete {"total":3,"analyzed":3,"failed":0,"matches":0,"totalCost":"0.000546","duration":1563}
2025-11-10 20:53:54 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68366,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1561,"cost":0.000178}
2025-11-10 20:53:54 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":3,"analyzed":3,"matches":0,"failed":0}
2025-11-10 20:53:54 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:53:54 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":3}
2025-11-10 20:54:00 [[32minfo[39m]: New messages found {"count":10}
2025-11-10 20:54:05 [[32minfo[39m]: Processing batch of new messages {"count":10}
2025-11-10 20:54:06 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 20:54:06 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":6,"filtered":4,"filterRate":"40%","duration":"5ms","reasons":{"keywords":4}}
2025-11-10 20:54:06 [[32minfo[39m]: Starting batch analysis {"totalMessages":6,"maxConcurrent":3}
2025-11-10 20:54:06 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":6,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:54:06 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":6,"total":10}
2025-11-10 20:54:06 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:06 [[32minfo[39m]: Getting OpenRouter client {"messageId":68410,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:06 [[32minfo[39m]: Getting OpenRouter client {"messageId":68414,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:06 [[32minfo[39m]: Making OpenRouter API call {"messageId":68410,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:06 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:06 [[32minfo[39m]: Making OpenRouter API call {"messageId":68415,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:06 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:06 [[32minfo[39m]: Getting OpenRouter client {"messageId":68415,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:06 [[32minfo[39m]: Making OpenRouter API call {"messageId":68414,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:07 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68410,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1267,"cost":0.000162}
2025-11-10 20:54:07 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68415,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1549,"cost":0.000171}
2025-11-10 20:54:08 [[32minfo[39m]: Getting OpenRouter client {"messageId":68416,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:08 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68414,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":2533,"cost":0.000162}
2025-11-10 20:54:08 [[32minfo[39m]: Getting OpenRouter client {"messageId":68417,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:08 [[32minfo[39m]: Making OpenRouter API call {"messageId":68416,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:08 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:08 [[32minfo[39m]: Getting OpenRouter client {"messageId":68418,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 20:54:08 [[32minfo[39m]: Making OpenRouter API call {"messageId":68417,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:08 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:08 [[32minfo[39m]: Making OpenRouter API call {"messageId":68418,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:08 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:09 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68416,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":837,"cost":0.00015}
2025-11-10 20:54:09 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68417,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1017,"cost":0.000159}
2025-11-10 20:54:09 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":10,"keywordsCount":12,"mode":"quality + keywords"}
2025-11-10 20:54:09 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":6}
2025-11-10 20:54:09 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":6,"analyzed":6,"matches":0,"failed":0}
2025-11-10 20:54:09 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:54:09 [[32minfo[39m]: Batch analysis complete {"total":6,"analyzed":6,"failed":0,"matches":0,"totalCost":"0.000972","duration":3743}
2025-11-10 20:54:09 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68418,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1204,"cost":0.000168}
2025-11-10 20:54:09 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":6,"total":10}
2025-11-10 20:54:09 [[32minfo[39m]: Pre-filtering complete {"total":10,"passed":6,"filtered":4,"filterRate":"40%","duration":"9ms","reasons":{"keywords":4}}
2025-11-10 20:54:09 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":6,"hasApiKey":true,"hasPrompt":true}
2025-11-10 20:54:09 [[32minfo[39m]: Getting OpenRouter client {"messageId":68410,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:09 [[32minfo[39m]: Starting batch analysis {"totalMessages":6,"maxConcurrent":3}
2025-11-10 20:54:09 [[32minfo[39m]: Making OpenRouter API call {"messageId":68410,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:09 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:09 [[32minfo[39m]: Making OpenRouter API call {"messageId":68414,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:09 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:09 [[32minfo[39m]: Getting OpenRouter client {"messageId":68414,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:09 [[32minfo[39m]: Making OpenRouter API call {"messageId":68415,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:09 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:09 [[32minfo[39m]: Getting OpenRouter client {"messageId":68415,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:10 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68410,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1008,"cost":0.000182}
2025-11-10 20:54:10 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68414,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1219,"cost":0.000185}
2025-11-10 20:54:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":68418,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":68418,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":68417,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":68417,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:11 [[32minfo[39m]: Making OpenRouter API call {"messageId":68416,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 20:54:11 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 20:54:11 [[32minfo[39m]: Getting OpenRouter client {"messageId":68416,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 20:54:11 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68415,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1315,"cost":0.000194}
2025-11-10 20:54:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68416,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1028,"cost":0.000174}
2025-11-10 20:54:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68418,"isMatch":false,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1222,"cost":0.000195}
2025-11-10 20:54:12 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68417,"isMatch":false,"confidence":10,"validationPassed":true,"meetsThreshold":false,"duration":1309,"cost":0.000183}
2025-11-10 20:54:12 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 20:54:12 [[32minfo[39m]: Batch analysis complete {"total":6,"analyzed":6,"failed":0,"matches":0,"totalCost":"0.001113","duration":2631}
2025-11-10 20:54:12 [[32minfo[39m]: No leads found in batch {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesAnalyzed":6}
2025-11-10 20:54:12 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":6,"analyzed":6,"matches":0,"failed":0}
2025-11-10 21:31:41 [[32minfo[39m]: New messages found {"count":1}
2025-11-10 21:31:46 [[32minfo[39m]: Processing batch of new messages {"count":1}
2025-11-10 21:31:46 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":15,"mode":"quality + keywords"}
2025-11-10 21:31:46 [[32minfo[39m]: About to analyze with AI {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 21:31:46 [[32minfo[39m]: Messages passed pre-filter {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","passed":1,"total":1}
2025-11-10 21:31:46 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"1ms","reasons":{}}
2025-11-10 21:31:46 [[32minfo[39m]: Getting OpenRouter client {"messageId":68420,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-7..."}
2025-11-10 21:31:46 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 21:31:46 [[32minfo[39m]: Making OpenRouter API call {"messageId":68420,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 21:31:46 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 21:31:47 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68420,"isMatch":false,"confidence":20,"validationPassed":true,"meetsThreshold":false,"duration":1150,"cost":0.00016}
2025-11-10 21:31:47 [[32minfo[39m]: AI analysis returned {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 21:31:47 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":0,"totalCost":"0.000160","duration":1152}
2025-11-10 21:31:47 [[32minfo[39m]: No leads found in batch {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","messagesAnalyzed":1}
2025-11-10 21:31:47 [[32minfo[39m]: AI analysis complete {"userId":"f2aceadb-9997-409f-97c4-465f6258ff14","total":1,"analyzed":1,"matches":0,"failed":0}
2025-11-10 21:31:47 [[32minfo[39m]: About to analyze with AI {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","messagesCount":1,"hasApiKey":true,"hasPrompt":true}
2025-11-10 21:31:47 [[32minfo[39m]: Messages passed pre-filter {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","passed":1,"total":1}
2025-11-10 21:31:47 [[32minfo[39m]: Pre-filtering complete {"total":1,"passed":1,"filtered":0,"filterRate":"0%","duration":"1ms","reasons":{}}
2025-11-10 21:31:47 [[32minfo[39m]: Pre-filtering messages (optimized mode) {"totalMessages":1,"keywordsCount":12,"mode":"quality + keywords"}
2025-11-10 21:31:47 [[32minfo[39m]: Getting OpenRouter client {"messageId":68420,"hasApiKey":true,"apiKeyLength":73,"apiKeyPrefix":"sk-or-v1-8..."}
2025-11-10 21:31:47 [[32minfo[39m]: Starting batch analysis {"totalMessages":1,"maxConcurrent":3}
2025-11-10 21:31:47 [[32minfo[39m]: Making OpenRouter API call {"messageId":68420,"model":"google/gemini-2.0-flash-001","hasClient":true}
2025-11-10 21:31:47 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 21:31:48 [[32minfo[39m]: Batch analysis complete {"total":1,"analyzed":1,"failed":0,"matches":1,"totalCost":"0.000184","duration":1230}
2025-11-10 21:31:48 [[32minfo[39m]: AI analysis complete (simplified) {"messageId":68420,"isMatch":true,"confidence":95,"validationPassed":true,"meetsThreshold":true,"duration":1229,"cost":0.000184}
2025-11-10 21:31:48 [[32minfo[39m]: AI analysis complete {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","total":1,"analyzed":1,"matches":1,"failed":0}
2025-11-10 21:31:48 [[32minfo[39m]: AI analysis returned {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","hasResults":true,"type":"object","keys":["analyzed","failed","matches","stats","duration"]}
2025-11-10 21:31:48 [[32minfo[39m]: Lead detected and saved {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242,"confidence":95}
2025-11-10 21:31:48 [[32minfo[39m]: Saved detected lead {"leadId":242,"messageId":68420,"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","confidence":95}
2025-11-10 21:31:48 [[32minfo[39m]: OpenRouter client initialized successfully
2025-11-10 21:31:48 [[32minfo[39m]: Attempting to generate message suggestion {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242}
2025-11-10 21:31:49 [[32minfo[39m]: Message suggestion generated {"leadId":68420,"duration":1053,"cost":0.000052}
2025-11-10 21:31:49 [[32minfo[39m]: Posting lead to Telegram {"leadId":68420,"channelId":"-1003240986074","confidence":95,"hasSuggestion":true}
2025-11-10 21:31:49 [[32minfo[39m]: üöÄ ATTEMPTING TO POST LEAD TO TELEGRAM {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242,"channelId":"-1003240986074","hasMessageSuggestion":true,"messagePreview":"–ò—â—É —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è SaaS-—Å—Ç–∞—Ä—Ç–∞–ø–∞ –≤ HR-—Å—Ñ–µ—Ä–µ"}
2025-11-10 21:31:49 [[32minfo[39m]: Message suggestion generated successfully {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242,"hasSuggestion":true}
2025-11-10 21:31:50 [[32minfo[39m]: Message sent to Telegram {"channelId":"-1003240986074","messageId":39}
2025-11-10 21:31:50 [[32minfo[39m]: üì¨ POST RESULT FROM TELEGRAM {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242,"success":true,"messageId":39}
2025-11-10 21:31:50 [[32minfo[39m]: Lead posted successfully {"leadId":68420,"messageId":39,"channelId":"-1003240986074"}
2025-11-10 21:31:50 [[32minfo[39m]: ‚úÖ Lead posted to Telegram successfully {"userId":"4c06ebb9-0ece-4f43-9927-0d1b6261821b","leadId":242,"telegramMessageId":39,"hasSuggestion":true}