warning: in the working copy of 'backend/backend/src/prompts/systemPrompt.js', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'backend/backend/src/services/messageAnalyzer.js', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/backend/backend/src/prompts/promptBuilder.js b/backend/backend/src/prompts/promptBuilder.js[m
[1mindex 572b1a6a..a96ea69f 100644[m
[1m--- a/backend/backend/src/prompts/promptBuilder.js[m
[1m+++ b/backend/backend/src/prompts/promptBuilder.js[m
[36m@@ -16,26 +16,22 @@[m [mexport const buildAnalysisPrompt = (message, userCriteria) => {[m
     message: messageText[m
   } = message;[m
   [m
[31m-  // Simplified, user-centric prompt[m
[31m-  const prompt = `ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð˜ ÐŸÐžÐ˜Ð¡ÐšÐ:[m
[31m-${userCriteria}[m
[31m-[m
[31m-Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð•:[m
[31m-${messageText}[m
[31m-${bio ? `Ð‘Ð¸Ð¾: ${bio}` : ''}[m
[31m-${chat_name ? `ÐšÐ°Ð½Ð°Ð»: ${chat_name}` : ''}[m
[32m+[m[32m  // Clean prompt without hardcoded logic logic, relying on System Prompt + User Criteria[m
[32m+[m[32m  const prompt = `Ð”ÐÐÐÐ«Ð• Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð¯:[m
[32m+[m[32mÐ¢ÐµÐºÑÑ‚: "${messageText}"[m
[32m+[m[32mÐÐ²Ñ‚Ð¾Ñ€: @${username || 'Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½'} ${bio ? `(${bio})` : ''}[m
[32m+[m[32mÐšÐ°Ð½Ð°Ð»: ${chat_name || 'Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½'}[m
 [m
[31m-Ð—ÐÐ”ÐÐ§Ð:[m
[31m-1. ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸ Ñ‚Ð¸Ð¿ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ: Ð­Ð¢Ðž ÐŸÐžÐ˜Ð¡Ðš (REQUEST) Ð¸Ð»Ð¸ ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð•ÐÐ˜Ð• (OFFER)?[m
[31m-   - Ð•ÑÐ»Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¿Ð¸ÑˆÐµÑ‚ "ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽ", "ÐŸÐ¾Ð¼Ð¾Ð³Ñƒ", "Ð—Ð°Ð½Ð¸Ð¼Ð°ÐµÐ¼ÑÑ", "Ð’ÐµÐ±Ð¸Ð½Ð°Ñ€" -> is_match: false.[m
[31m-   - Ð•ÑÐ»Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¿Ð¸ÑˆÐµÑ‚ "Ð˜Ñ‰Ñƒ", "ÐÑƒÐ¶Ð½Ð¾", "Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ" -> Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸ Ðº ÑˆÐ°Ð³Ñƒ 2.[m
[32m+[m[32m-------------------[m
[32m+[m[32mÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð˜ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯ (Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯):[m
[32m+[m[32m${userCriteria}[m
[32m+[m[32m-------------------[m
 [m
[31m-2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð¯Ðœ ÐŸÐžÐ˜Ð¡ÐšÐ.[m
[31m-   - Ð¢ÐµÐ¼Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð²Ð¿Ð°Ð´Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‡Ð½Ð¾.[m
[31m-   - Ð’ÐÐ˜ÐœÐÐÐ˜Ð•: Ð Ð°Ð·Ð´ÐµÐ»ÑÐ¹ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð½Ð° "ÐšÐžÐ“Ðž Ð˜Ð¡ÐšÐÐ¢Ð¬" Ð¸ "ÐšÐžÐ“Ðž Ð˜Ð¡ÐšÐ›Ð®Ð§Ð˜Ð¢Ð¬".[m
[31m-   - Ð•ÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼ Ð¸Ð· ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ "Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ/Ð½Ðµ Ð¸ÑÐºÐ°Ñ‚ÑŒ/ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ñ‹" -> is_match: false.[m
[32m+[m[32mÐ¢Ð’ÐžÐ¯ Ð—ÐÐ”ÐÐ§Ð:[m
[32m+[m[32m1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»Ñƒ "ÐÐ• Ð¡Ð§Ð˜Ð¢ÐÐ¢Ð¬ Ð›Ð˜Ð”ÐžÐœ" (Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³Ð°Ð¼). Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ â€” ÐžÐ¢ÐšÐÐ—.[m
[32m+[m[32m2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»Ñƒ "Ð¡Ð§Ð˜Ð¢ÐÐ¢Ð¬ Ð›Ð˜Ð”ÐžÐœ". Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ â€” Ð£Ð¡ÐŸÐ•Ð¥.[m
 [m
[31m-Ð’ÐµÑ€Ð½Ð¸ JSON: { "is_match": boolean, "confidence_score": number, "reasoning": string }`;[m
[32m+[m[32mÐ’ÐÐ–ÐÐž: Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐ¹ Ð»ÑŽÐ±Ñ‹Ðµ ÑÐ²Ð¾Ð¸ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸. Ð Ð°Ð±Ð¾Ñ‚Ð°Ð¹ Ð¢ÐžÐ›Ð¬ÐšÐž Ð¿Ð¾ Ñ‚ÐµÐºÑÑ‚Ñƒ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð•Ð’ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯ Ð²Ñ‹ÑˆÐµ.`;[m
   [m
   return prompt;[m
 };[m
[1mdiff --git a/backend/backend/src/prompts/systemPrompt.js b/backend/backend/src/prompts/systemPrompt.js[m
[1mindex 88827e7a..fec37613 100644[m
[1m--- a/backend/backend/src/prompts/systemPrompt.js[m
[1m+++ b/backend/backend/src/prompts/systemPrompt.js[m
[36m@@ -1,29 +1,32 @@[m
[31m-/**[m
[31m- * System prompt for AI lead detection[m
[31m- * CRITICAL: This prompt is designed to prevent hallucinations[m
[31m- */[m
[32m+[m[32mexport const SYSTEM_PROMPT = `Ð¢Ñ‹ â€” ÑÑ‚Ñ€Ð¾Ð³Ð¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº Ð»Ð¸Ð´Ð¾Ð² (Lead Qualification AI).[m
 [m
[31m-export const SYSTEM_PROMPT = `Ð¢Ñ‹ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑˆÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¸Ð· Telegram.[m
[32m+[m[32mÐ¢Ð²Ð¾Ñ Ð•Ð”Ð˜ÐÐ¡Ð¢Ð’Ð•ÐÐÐÐ¯ Ñ†ÐµÐ»ÑŒ â€” ÐºÐ»Ð°ÑÑÐ¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð¯Ðœ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯.[m
 [m
[31m-Ð¢Ð²Ð¾Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° â€” Ð¢ÐžÐ§ÐÐž ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸ÑÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.[m
[32m+[m[32mÐÐ›Ð“ÐžÐ Ð˜Ð¢Ðœ Ð ÐÐ‘ÐžÐ¢Ð«:[m
 [m
[31m-Ð“Ð›ÐÐ’ÐÐžÐ• ÐŸÐ ÐÐ’Ð˜Ð›Ðž: ÐžÐ¢Ð›Ð˜Ð§ÐÐ™ ÐŸÐžÐ˜Ð¡Ðš (REQUEST) ÐžÐ¢ ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð•ÐÐ˜Ð¯ (OFFER).[m
[31m-Ð•ÑÐ»Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº ÐŸÐ Ð•Ð”Ð›ÐÐ“ÐÐ•Ð¢ ÑƒÑÐ»ÑƒÐ³Ð¸, Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ, Ð²ÐµÐ±Ð¸Ð½Ð°Ñ€, Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð»Ð¸ ÑÐ²Ð¾Ð¹ ÑÐµÑ€Ð²Ð¸Ñ â€” ÑÑ‚Ð¾ ÐÐ• Ð›Ð˜Ð” (is_match: false).[m
[31m-Ð”Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° ("Ñƒ Ð²Ð°Ñ Ð½ÐµÑ‚ Ð¿Ñ€Ð¾Ð´Ð°Ð¶?"), Ð½Ð¾ Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÑ‚ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ â€” ÑÑ‚Ð¾ Ð Ð•ÐšÐ›ÐÐœÐ/ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð•ÐÐ˜Ð•.[m
[32m+[m[32m1. ÐÐÐÐ›Ð˜Ð— ÐÐ•Ð“ÐÐ¢Ð˜Ð’ÐÐ«Ð¥ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð•Ð’ (BLOCKERS):[m
[32m+[m[32m   - Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð’Ð¡Ð•Ð“Ð”Ð Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐ¹ ÑÐµÐºÑ†Ð¸Ð¸: "ÐÐ• Ð¡Ð§Ð˜Ð¢ÐÐ¢Ð¬ Ð›Ð˜Ð”ÐžÐœ", "Ð˜Ð¡ÐšÐ›Ð®Ð§Ð•ÐÐ˜Ð¯", "Ð¡Ð¢ÐžÐŸ-Ð¡Ð›ÐžÐ’Ð", "ÐœÐ˜ÐÐ£Ð¡-Ð¡Ð›ÐžÐ’Ð".[m
[32m+[m[32m   - Ð•ÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¸ Ð¸Ð· ÑÑ‚Ð¸Ñ… ÑÐµÐºÑ†Ð¸Ð¹ â€” ÐÐ•ÐœÐ•Ð”Ð›Ð•ÐÐÐž Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ is_match: false.[m
[32m+[m[32m   - ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° (reasoning) Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ: "Blocked by negative criterion: [Ñ‚ÐµÐºÑÑ‚ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ñ]".[m
[32m+[m[32m   - matched_criteria Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÐŸÐ£Ð¡Ð¢Ð«Ðœ Ð¸Ð»Ð¸ null.[m
 [m
[31m-Ð›ÐžÐ“Ð˜ÐšÐ Ð ÐÐ‘ÐžÐ¢Ð« Ð¡ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð¯ÐœÐ˜ (ÐŸÐžÐ—Ð˜Ð¢Ð˜Ð’ VS ÐÐ•Ð“ÐÐ¢Ð˜Ð’):[m
[31m-ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ñ‡Ð°ÑÑ‚Ð¾ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ‚Ð¾Ð³Ð¾, ÐºÐ¾Ð³Ð¾ ÐÐÐ”Ðž Ð½Ð°Ð¹Ñ‚Ð¸, Ð¸ ÐºÐ¾Ð³Ð¾ ÐÐ• ÐÐÐ”Ðž (Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ).[m
[31m-1. Ð¢Ð²Ð¾Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° â€” Ð¿Ð¾Ð½ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸ÐµÐ².[m
[31m-2. Ð•ÑÐ»Ð¸ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ "ÐºÐ¾Ð³Ð¾ Ð½Ðµ Ð¸ÑÐºÐ°Ñ‚ÑŒ", "Ð¼Ð¸Ð½ÑƒÑ-ÑÐ»Ð¾Ð²Ð°", "ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ð²", "Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ" (ÑÐ»Ð¾Ð²Ð°-Ð¼Ð°Ñ€ÐºÐµÑ€Ñ‹: "Ð½Ðµ", "ÐºÑ€Ð¾Ð¼Ðµ", "Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ", "Ð·Ð° Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸ÐµÐ¼", "ÑÑ‚Ð¾Ð¿") â€” ÑÑ‚Ð¾ Ð‘Ð›ÐžÐšÐ˜Ð Ð£Ð®Ð©Ð˜Ð• ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸.[m
[31m-3. Ð•ÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÐµÑ‚ Ð¿Ð¾Ð´ Ð‘Ð›ÐžÐšÐ˜Ð Ð£Ð®Ð©Ð˜Ð™ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¹ â€” ÑÑ‚Ð¾ is_match: false (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð»Ð¸).[m
[32m+[m[32m2. ÐÐÐÐ›Ð˜Ð— ÐŸÐžÐ—Ð˜Ð¢Ð˜Ð’ÐÐ«Ð¥ ÐšÐ Ð˜Ð¢Ð•Ð Ð˜Ð•Ð’ (MATCHING):[m
[32m+[m[32m   - Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ ÐÐ•Ð¢, Ð¸Ñ‰Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ Ñ ÑÐµÐºÑ†Ð¸ÑÐ¼Ð¸ "Ð¡Ð§Ð˜Ð¢ÐÐ¢Ð¬ Ð›Ð˜Ð”ÐžÐœ", "ÐšÐžÐ“Ðž Ð˜Ð©Ð•Ðœ", "Ð‘ÐžÐ›Ð˜".[m
[32m+[m[32m   - Ð¡Ð¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÐŸÐž Ð¡ÐœÐ«Ð¡Ð›Ð£, Ð° Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾ ÑÐ»Ð¾Ð²Ð°Ð¼.[m
[32m+[m[32m   - Ð•ÑÐ»Ð¸ Ð½Ð°Ñ…Ð¾Ð´Ð¸ÑˆÑŒ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ â€” Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ is_match: true.[m
[32m+[m[32m   - Ð’ Ð¿Ð¾Ð»Ðµ matched_criteria Ð²ÑÑ‚Ð°Ð²ÑŒ Ð¢ÐžÐ§ÐÐ£Ð® Ð¦Ð˜Ð¢ÐÐ¢Ð£ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸Ð· ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸ÐµÐ² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ð»Ð°. ÐÐ• ÐŸÐ Ð˜Ð”Ð£ÐœÐ«Ð’ÐÐ™ Ð¡Ð’ÐžÐ˜ ÐÐÐ—Ð’ÐÐÐ˜Ð¯.[m
 [m
[31m-ÐŸÐ ÐÐ’Ð˜Ð›Ð:[m
[31m-1. Ð§Ð¸Ñ‚Ð°Ð¹ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð‘Ð£ÐšÐ’ÐÐ›Ð¬ÐÐž.[m
[31m-2. Ð¡ÐµÐºÑ†Ð¸Ñ "ÐÐ• Ð¡Ð§Ð˜Ð¢ÐÐ¢Ð¬ Ð›Ð˜Ð”ÐžÐœ" â€” ÑÑ‚Ð¾ ÐÐ‘Ð¡ÐžÐ›Ð®Ð¢ÐÐ«Ð™ Ð¡Ð¢ÐžÐŸ.[m
[31m-3. ÐÐ• Ð´Ð¾Ð´ÑƒÐ¼Ñ‹Ð²Ð°Ð¹ ÑÐ²ÑÐ·Ð¸. Ð•ÑÐ»Ð¸ ÑÐ²Ð½Ð¾ Ð½Ðµ ÑÐºÐ°Ð·Ð°Ð½Ð¾ "Ð¸Ñ‰Ñƒ", "Ð½ÑƒÐ¶Ð½Ð¾", "Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ" â€” Ð±ÑƒÐ´ÑŒ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶ÐµÐ½.[m
[31m-4. ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð° ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð•ÐÐ˜Ð¯ (Ð­Ð¢Ðž ÐÐ• Ð›Ð˜Ð”): "Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽ", "Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ", "Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÐ¼ÑÑ", "Ð½Ð°Ñˆ ÑÐµÑ€Ð²Ð¸Ñ", "Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐ°ÐµÐ¼", "Ð²ÐµÐ±Ð¸Ð½Ð°Ñ€", "Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ð¼", "ÑÐ´ÐµÐ»Ð°ÐµÐ¼".[m
[31m-5. Ð›ÑƒÑ‡ÑˆÐµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¸Ð´Ð°, Ñ‡ÐµÐ¼ Ð´Ð°Ñ‚ÑŒ Ð»Ð¾Ð¶Ð½Ð¾Ðµ ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ.[m
[32m+[m[32m3. ÐŸÐ ÐÐ’Ð˜Ð›Ðž "ÐšÐžÐÐ¢Ð•ÐšÐ¡Ð¢Ð":[m
[32m+[m[32m   - ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (1-3 ÑÐ»Ð¾Ð²Ð°) Ð±ÐµÐ· ÑÐ²Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° â€” Ð­Ð¢Ðž ÐÐ• Ð›Ð˜Ð” (is_match: false).[m
[32m+[m[32m   - Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¶Ð°Ð»Ð¾Ð±Ð° Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ Ð½Ð° Ñ‡ÑƒÐ¶Ð¾Ð¹ ÑÐµÑ€Ð²Ð¸Ñ ("Ð¼Ð½Ðµ Ð½Ðµ Ð¿Ñ€Ð¸Ð²ÐµÐ·Ð»Ð¸ Ð¿Ð¸Ñ†Ñ†Ñƒ") â€” Ð­Ð¢Ðž ÐÐ• Ð›Ð˜Ð”.[m
[32m+[m[32m   - Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð¶Ð°Ð»Ð¾Ð±Ð° Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†Ð° Ð±Ð¸Ð·Ð½ÐµÑÐ° ("Ð¼Ð¾Ð¸ ÐºÑƒÑ€ÑŒÐµÑ€Ñ‹ Ð½Ðµ Ð²Ð¾Ð·ÑÑ‚") â€” Ð­Ð¢Ðž Ð›Ð˜Ð”.[m
 [m
[31m-ÐžÐ¢Ð’Ð•Ð¢: JSON Ñ is_match, confidence_score, reasoning, matched_criteria`;[m
[32m+[m[32mÐ¤ÐžÐ ÐœÐÐ¢ ÐžÐ¢Ð’Ð•Ð¢Ð (JSON):[m
[32m+[m[32m{[m
[32m+[m[32m  "is_match": boolean, // true Ð¢ÐžÐ›Ð¬ÐšÐž ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ‚Ð¸Ð²Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ Ð˜ Ð½ÐµÑ‚ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð¾Ðº[m
[32m+[m[32m  "confidence_score": number, // 0-100 (90+ Ð´Ð»Ñ ÑÐ²Ð½Ñ‹Ñ…, 70-80 Ð´Ð»Ñ ÐºÐ¾ÑÐ²ÐµÐ½Ð½Ñ‹Ñ…)[m
[32m+[m[32m  "reasoning": string, // ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼[m
[32m+[m[32m  "matched_criteria": string // Ð¢ÐžÐ§ÐÐÐ¯ Ñ†Ð¸Ñ‚Ð°Ñ‚Ð° ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ð²ÑˆÐµÐ³Ð¾ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ñ Ð¸Ð· Ñ‚ÐµÐºÑÑ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ (Ð¸Ð»Ð¸ null)[m
[32m+[m[32m}`;[m
 [m
 export default SYSTEM_PROMPT;[m
[1mdiff --git a/backend/backend/src/services/messageAnalyzer.js b/backend/backend/src/services/messageAnalyzer.js[m
[1mindex 5c7df3d5..a2806f3b 100644[m
[1m--- a/backend/backend/src/services/messageAnalyzer.js[m
[1m+++ b/backend/backend/src/services/messageAnalyzer.js[m
[36m@@ -128,7 +128,7 @@[m [mexport const analyzeMessage = async (message, userCriteria, apiKey) => {[m
     [m
     // Get OpenRouter client and model[m
     const client = getOpenRouter(apiKey);[m
[31m-    const model = process.env.AI_MODEL || 'deepseek/deepseek-v3.2';[m
[32m+[m[32m    const model = process.env.AI_MODEL || 'openai/gpt-4o-mini';[m
     [m
     logger.info('Making OpenRouter API call', {[m
       messageId: message.id,[m
